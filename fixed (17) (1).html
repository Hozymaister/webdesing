<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO & Core Meta Tags -->
  <title>Bezpečnostní agentura Brno – Ostraha majetku, Osobní ochrana, Event Security | Bravion</title>
  <meta name="description" content="Profesionální bezpečnostní agentura v Brně s působností po celé ČR. Specializujeme se na ostrahu majetku, osobní ochranu (bodyguard servis) a bezpečnostní služby na akcích. Zajistíme Vaši bezpečnost spolehlivě a diskrétně.">
  <link rel="canonical" href="https://www.bravion.cz/">
  
  <!-- LCP Preload -->
  <link rel="preload" as="image"
      href="https://images.unsplash.com/photo-1511559405634-b43d3f946ff0?q=80&w=1920&auto=format&fit=crop"
      imagesrcset="https://images.unsplash.com/photo-1511559405634-b43d3f946ff0?q=80&w=1280&auto=format&fit=crop 1280w, https://images.unsplash.com/photo-1511559405634-b43d3f946ff0?q=80&w=1920&auto=format&fit=crop 1920w"
      imagesizes="100vw" fetchpriority="high">

  <!-- Favicon & Manifest -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Open Graph / Facebook / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.bravion.cz/">
  <meta property="og:title" content="Bezpečnostní agentura Brno – Ostraha majetku, Osobní ochrana | Bravion">
  <meta property="og:description" content="Profesionální bezpečnostní služby v Brně a po celé ČR. Specializujeme se na ostrahu majetku, osobní ochranu (bodyguard) a event security.">
  <meta property="og:image" content="https://bravion.cz/wp-content/uploads/2025/09/Bravion-OG.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Bravion Security – event security, ostraha objektů a osobní ochrana">
  
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.bravion.cz/">
  <meta property="twitter:title" content="Bezpečnostní agentura Brno – Ostraha majetku, Osobní ochrana | Bravion">
  <meta property="twitter:description" content="Profesionální bezpečnostní služby v Brně a po celé ČR. Specializujeme se na ostrahu majetku, osobní ochranu (bodyguard) a event security.">
  <meta property="twitter:image" content="https://bravion.cz/wp-content/uploads/2025/09/Bravion-OG.png">
  <!-- Additional Open Graph and Twitter metadata -->
  <meta property="og:site_name" content="Bravion Security">
  <meta property="og:locale" content="cs_CZ">
  <meta name="twitter:site" content="@bravionsecurity">
  <meta name="twitter:creator" content="@bravionsecurity">

  <!-- Preconnect to external resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* Palette: Warm, Serious, Human */
      --brand-accent: #d4a276;
      --brand-accent-light: #e6b991;
      --bg-dark: #121212;
      --bg-card: #1a1a1a;
      --text-light: #f5f5f5; 
      --text-muted: #b0b0b0;
      --border-color: rgba(212, 162, 118, 0.2); 
      --accent-glow: rgba(212, 162, 118, 0.5);

      /* Shadows */
      --shadow-dark: 0 10px 30px -15px rgba(0, 0, 0, 0.5);
      --shadow-accent-glow: 0 0 25px var(--accent-glow);

      /* Typography */
      --font-heading: 'Poppins', sans-serif;
      --font-body: 'Nunito Sans', sans-serif;
      
      /* Spacing & Radii */
      --radius: 8px;
      --section-padding: clamp(6rem, 12vw, 10rem);
    }
    
    /* --- Base & Resets --- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      background-color: var(--bg-dark);
      color: var(--text-light);
      font-family: var(--font-body);
      line-height: 1.8;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      position: relative;
    }
    body.loading, body.modal-open {
      overflow: hidden;
    }
    .grid-background {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background-image:
            linear-gradient(to right, rgba(212, 162, 118, 0.05) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(212, 162, 118, 0.05) 1px, transparent 1px);
        background-size: 50px 50px;
        z-index: -2;
        animation: pan-grid 30s linear infinite;
    }
    @keyframes pan-grid {
        0% { background-position: 0 0; }
        100% { background-position: -50px -50px; }
    }

    h1, h2, h3, h4 {
      font-family: var(--font-heading);
      font-weight: 600;
      line-height: 1.3;
      text-wrap: balance;
      color: var(--text-light);
    }
    [data-animate-text] { overflow: hidden; }
    h2 .char {
      transform: translateY(0) !important;
      display: inline-block;
    }
    h1 { font-size: clamp(2.8rem, 6vw, 4.5rem); }
    h2 { font-size: clamp(2.2rem, 5vw, 3rem); }
    h3 { font-size: clamp(1.25rem, 3vw, 1.5rem); }
    p { max-width: 65ch; color: var(--text-muted); }
    .accent-text { color: var(--brand-accent); }
    .section-header { text-align: center; max-width: 700px; margin: 0 auto 5rem auto; }
    .section-header p { font-size: 1.1rem; }

    /* --- Accessibility --- */
    .skip-link {
      position: absolute;
      top: -100px;
      left: 0;
      background: var(--brand-accent);
      color: var(--bg-dark);
      padding: 1rem;
      z-index: 10001;
      transition: top 0.3s ease;
      font-weight: 700;
    }
    .skip-link:focus {
      top: 0;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* --- Preloader --- */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: var(--bg-dark);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: opacity 0.75s ease, visibility 0.75s ease;
    }
    #preloader.hidden {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
    }
    #preloader .preloader-logo {
        width: 250px;
        max-width: 60%;
        height: auto;
        margin-bottom: 2rem;
        opacity: 0;
        animation: fadeInLogo 1s ease forwards;
    }
    #preloader .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid var(--border-color);
        border-top-color: var(--brand-accent);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeInLogo { to { opacity: 1; } }
    
    /* --- Scroll Progress Bar --- */
    #scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: var(--brand-accent);
        transform-origin: 0 50%;
        z-index: 9999;
        transform: scaleX(0);
    }
    
    /* --- Cursor Aura --- */
    #cursor-aura {
        position: fixed;
        width: 600px;
        height: 600px;
        background: radial-gradient(circle, var(--accent-glow) 0%, transparent 60%);
        border-radius: 50%;
        top: 0;
        left: 0;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: -1;
        opacity: 0.1;
    }


    /* --- Buttons & Focus States --- */
    .btn {
      display: inline-block;
      padding: 0.9rem 2.2rem;
      border-radius: var(--radius);
      font-weight: 700;
      font-family: var(--font-body);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s;
      cursor: pointer;
      border: 1px solid transparent;
      text-decoration: none;
    }
    .btn:focus-visible, summary:focus-visible {
        outline: 2px solid var(--brand-accent);
        outline-offset: 2px;
    }
    .btn-accent {
      background-color: var(--brand-accent);
      color: var(--bg-dark); 
      box-shadow: var(--shadow-dark);
    }
    .btn-accent:hover {
      transform: translateY(-3px); 
      box-shadow: var(--shadow-dark), var(--shadow-accent-glow);
      background-color: #e6b991;
    }
    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-light);
    }
    .btn-secondary:hover {
      background-color: var(--bg-card);
      border-color: var(--brand-accent);
      box-shadow: var(--shadow-accent-glow);
    }

    /* --- Hero Section --- */
    #hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
      padding: 5rem 1.5rem;
      color: white;
      overflow: hidden;
    }
    .hero-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
    }
    .hero-background img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    #hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(18,18,18,0.5) 0%, var(--bg-dark) 90%);
        z-index: -1;
    }
    .hero-content { max-width: 850px; }
    .hero-subheading {
        font-family: var(--font-heading);
        color: var(--brand-accent);
        font-weight: 600;
        letter-spacing: 0.05em;
        font-size: clamp(1rem, 3vw, 1.2rem);
    }
    .hero-claim {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 1.5rem;
        font-weight: 600;
        color: var(--text-muted);
    }
    .hero-claim span {
        border-left: 2px solid var(--border-color);
        padding-left: 1.5rem;
    }
    .hero-claim span:first-child {
        border-left: none;
        padding-left: 0;
    }
    .hero-content p {
      font-size: 1.2rem;
      margin: 1.5rem auto 2.5rem auto;
      color: var(--text-light);
      opacity: 0.9;
    }
    .hero-actions { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
    .hero-contact-quick {
        margin-top: 3rem;
        display: flex;
        justify-content: center;
        gap: 2rem;
        font-weight: 600;
    }
    .hero-contact-quick a {
        color: var(--text-muted);
        text-decoration: none;
        transition: color 0.3s;
    }
    .hero-contact-quick a:hover {
        color: var(--brand-accent);
    }
    .hero-trust{display:flex;gap:1rem;justify-content:center;margin:1rem 0 0;color:var(--text-muted);flex-wrap:wrap}
    .hero-quick-form{margin-top:1.25rem}
    .quick-form{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:0.75rem;margin-top:0.75rem;max-height:600px;overflow:hidden;transition:max-height .4s ease}
    .quick-form.collapsed{max-height:0;margin-top:0}
    .quick-form label{display:flex;flex-direction:column;font-size:.9rem;gap:.35rem}
    .quick-form input,.quick-form select{background:var(--bg-card);border:1px solid var(--border-color);color:var(--text-light);padding:.7rem .9rem;border-radius:var(--radius)}
    .quick-form .hp{position:absolute;left:-9999px}
    .form-note{display:block;margin-top:.25rem;color:var(--text-muted);font-size:.85rem}


    /* --- Clients Section --- */
    #clients {
        background-color: transparent;
        padding: 4rem 0;
        border-top: 1px solid var(--border-color);
        border-bottom: 1px solid var(--border-color);
    }
    .clients-title { text-align: center; font-weight: 600; color: var(--text-muted); margin-bottom: 2rem; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.1em; }
    .clients-grid { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 3rem; }
    .client-logo {
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
    }
    .client-logo:hover {
      transform: scale(1.1) perspective(1000px) rotateX(10deg);
    }
    .client-logo img { max-height: 60px; max-width: 150px; filter: grayscale(100%) brightness(0.7); opacity: 0.7; transition: filter 0.3s ease, opacity 0.3s ease; }
    .client-logo:hover img { filter: grayscale(0%) brightness(1); opacity: 1; }
    .client-name {
      font-size: 0.875rem;
      color: var(--text-muted);
      font-weight: 600;
    }
    .cases-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin: 2.5rem auto 0; max-width: 1100px;}
    .case{background:var(--bg-dark);border:1px solid var(--border-color);border-radius:var(--radius);padding:1.5rem; display: flex; flex-direction: column;}
    .case h4{font-size:1.2rem;margin-bottom:0.25rem; color: var(--brand-accent); line-height: 1.4;}
    .case-partner { font-size: 0.9rem; font-weight: 400; color: var(--text-muted); font-family: var(--font-body); display: block; margin-bottom: 1rem; }
    .case ul { list-style: none; padding-left: 0; margin: 0; flex-grow: 1;}
    .case li { position: relative; padding-left: 1.5rem; margin-bottom: 0.6rem; font-size: 0.95rem; color: var(--text-light); }
    .case li::before { content: '›'; position: absolute; left: 0; top: -2px; color: var(--brand-accent); font-size: 1.5rem; line-height: 1; }
    .case li strong { color: var(--brand-accent); font-weight: 700;}

    /* --- About Section --- */
    .about-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 4rem; align-items: center; }
    .about-image-wrapper { position: relative; padding: 1rem; }
    .about-image { width: 100%; height: 500px; object-fit: cover; border-radius: var(--radius); position: relative; z-index: 2; }
    .about-image-wrapper::before {
        content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        border: 2px solid var(--border-color); border-radius: var(--radius); transform: rotate(-3deg);
        z-index: 1; transition: transform 0.4s ease;
    }
    .about-image-wrapper:hover::before { transform: rotate(0deg); }
    .about-text { position: relative; padding-left: 2.5rem; }
    .about-text::before {
        content: ''; position: absolute; left: 0; top: 0.5rem; width: 3px;
        height: calc(100% - 1rem); background-color: var(--brand-accent); border-radius: 5px;
    }
    .about-text h2 { margin-bottom: 1.5rem; }
    .about-values { list-style: none; margin-top: 2rem; }
    .about-values li { display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem; }
    .about-values svg { width: 32px; height: 32px; color: var(--brand-accent); flex-shrink: 0; margin-top: 0.25rem; }
    .about-values h3 { font-size: 1.1rem; margin-bottom: 0.25rem; }
    .about-usps{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem;margin-top:2rem}
    .about-usps div{background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--radius);padding:.8rem; text-align: center;}
    .about-usps span {font-size: 0.9rem; color: var(--text-muted);}

    /* --- Stats Section --- */
    #stats {
        background-color: var(--bg-card);
        position: relative;
        overflow: hidden;
    }
    .stats-bg-animated {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        position: relative;
        z-index: 1;
    }
    .stat-item { text-align: center; }
    .stat-number {
        font-size: clamp(3rem, 8vw, 4rem);
        font-family: var(--font-heading);
        font-weight: 700;
        color: var(--brand-accent);
        line-height: 1;
    }
    .stat-label {
        font-size: 1rem;
        color: var(--text-muted);
    }
    
    /* --- Services Section --- */
    .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
    .service-card {
        background-color: var(--bg-dark); border-radius: var(--radius); overflow: hidden;
        box-shadow: var(--shadow-dark); position: relative; color: white;
        display: flex; flex-direction: column;
        transform-style: preserve-3d;
        will-change: transform;
        transition: transform 0.4s ease;
    }
    .service-card-image-content {
        min-height: 400px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        position: relative;
        overflow: hidden;
    }
    .service-card::after {
        content: ''; position: absolute; inset: 0; border: 2px solid transparent;
        border-radius: var(--radius); transition: border-color 0.4s ease, box-shadow 0.4s ease;
        pointer-events: none;
        box-shadow: 0 0 0 0 transparent;
    }
    .service-card:hover::after {
        border-color: var(--brand-accent);
        box-shadow: 0 0 20px var(--accent-glow);
    }
    .service-card-bg {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        object-fit: cover; z-index: 0; transition: transform 0.4s ease;
    }
    .service-card:hover .service-card-bg { transform: scale(1.05) translateZ(-50px); }
    .service-card-content {
        padding: 2rem; position: relative; z-index: 2;
        background: linear-gradient(to top, rgba(26,26,26,0.95) 20%, rgba(26,26,26,0.5), transparent);
        transition: background 0.4s ease;
        transform: translateZ(20px);
    }
    .service-card:hover .service-card-content { background: linear-gradient(to top, rgba(26,26,26,1) 40%, rgba(26,26,26,0.7), transparent); }
    .service-card-icon { width: 40px; height: 40px; color: var(--brand-accent); margin-bottom: 1rem; }
    .service-card-content h3 { margin-bottom: 0.5rem; }
    .service-card-content p {
        color: var(--text-muted); max-height: 0; opacity: 0; overflow: hidden;
        transition: max-height 0.4s ease-out, opacity 0.4s ease-out;
    }
    .service-card:hover p { max-height: 150px; opacity: 1; }
    .service-details{margin: 1.5rem 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);}
    .service-toggle{background:transparent;border:1px solid var(--border-color);color:var(--text-light);padding:.5rem .75rem;border-radius:var(--radius);cursor:pointer; font-weight: 600;}
    .service-includes li{position:relative;padding-left:1.2rem;color:var(--text-muted); font-size: 0.9rem;}
    .service-includes li::before{content:"✓";position:absolute;left:0;color:var(--brand-accent)}
    .service-microfaq details{background:var(--bg-dark);border:1px solid var(--border-color);border-radius:var(--radius);padding:.6rem .75rem;margin-top:.4rem}
    .service-microfaq summary { cursor: pointer; font-weight: 600;}
    .service-microfaq p { font-size: 0.9rem; padding-top: 0.5rem;}


    /* --- Process Section --- */
    .process-steps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 3rem 2rem;
        position: relative;
    }
    #process-line {
        position: absolute;
        top: 1.5rem;
        left: 0;
        width: 100%;
        height: 2px;
        z-index: 0;
        pointer-events: none;
    }
    .process-step {
        background-color: var(--bg-card); padding: 2.5rem 2rem; border-radius: var(--radius);
        text-align: center; border: 1px solid var(--border-color); position: relative;
        transition: transform 0.3s ease, border-color 0.3s ease;
    }
    .process-step.is-active {
        transform: scale(1.05);
        border-color: var(--brand-accent);
        box-shadow: var(--shadow-accent-glow);
    }
    .process-step-number {
        position: absolute; top: -1.5rem; left: 50%; transform: translateX(-50%);
        width: 3rem; height: 3rem; background-color: var(--brand-accent); color: var(--bg-dark);
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-family: var(--font-heading); font-size: 1.5rem; font-weight: 700;
        border: 4px solid var(--bg-dark); z-index: 1;
    }
    .process-step h3 { margin-top: 1.5rem; }
    .deliverables{list-style:none;margin-top:.75rem}
    .deliverables li{color:var(--text-muted);position:relative;padding-left:1.2rem; font-size: 0.9rem;}
    .deliverables li::before{content:"✔";position:absolute;left:0;color:var(--brand-accent)}

    /* --- Team Section --- */
    #team { background-color: var(--bg-dark); position: relative; overflow: hidden; }
    #team::before {
        content: 'BRAVION'; position: absolute; top: 50%; left: 50%;
        transform: translate(-50%, -50%); font-size: clamp(8rem, 20vw, 20rem);
        font-family: var(--font-heading); font-weight: 700; color: rgba(255, 255, 255, 0.02);
        z-index: 0;
    }
    .team-grid { 
        display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
        gap: 3rem; position: relative; z-index: 1; justify-content: center; max-width: 900px; margin-left: auto; margin-right: auto;
    }
    .team-member { text-align: center; position: relative; cursor: pointer; }
    .team-member-img-wrapper { 
      position: relative; max-width: 250px; margin: 0 auto 1.5rem auto;
      overflow: hidden; border-radius: 50%;
    }
    .team-member-img-wrapper::before {
        content: '';
        position: absolute;
        top: -4px; left: -4px;
        width: calc(100% + 8px); height: calc(100% + 8px);
        border: 2px solid var(--brand-accent);
        border-radius: 50%;
        opacity: 0;
        transform: scale(0.9);
        transition: opacity 0.4s ease, transform 0.4s ease;
    }
    .team-member:hover .team-member-img-wrapper::before {
        opacity: 1;
        transform: scale(1);
    }
    .team-member img { 
        width: 100%; aspect-ratio: 1/1; object-fit: cover; 
        border: 4px solid var(--border-color); border-radius: 50%;
        transition: transform 0.4s ease, filter 0.4s ease;
    }
    .voksova-img {
        object-position: center 20%;
    }
    .team-member-overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background-color: rgba(18,18,18, 0.7);
      color: white; font-weight: 600;
      opacity: 0; transition: opacity 0.4s ease;
      padding: 1rem;
    }
    .team-member-overlay span { font-size: 1.1rem; }
    .team-member-overlay .plus-icon { font-size: 2rem; margin-top: 0.5rem; }

    .team-member:hover img {
      transform: scale(1.1);
      filter: brightness(0.7);
    }
    .team-member:hover .team-member-overlay {
      opacity: 1;
    }
    .team-member h3 { font-size: 1.2rem; }
    .team-member p { font-size: 1rem; color: var(--brand-accent); }

    /* --- Team Modal --- */
    #team-modal-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        z-index: 9990;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    #team-modal-overlay.visible {
        opacity: 1;
        visibility: visible;
    }
    #team-modal-content {
        background-color: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        max-width: 800px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        padding: 2rem;
        position: relative;
        transform: scale(0.9);
        transition: transform 0.4s ease;
    }
    #team-modal-overlay.visible #team-modal-content {
        transform: scale(1);
    }
    #team-modal-close {
        position: absolute;
        top: 1rem; right: 1rem;
        background: none;
        border: none;
        color: var(--text-light);
        font-size: 2rem;
        cursor: pointer;
        line-height: 1;
    }
    .modal-grid {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
    }
    #modal-img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: var(--radius);
    }
    #modal-name { margin-bottom: 0.25rem; }
    #modal-role { color: var(--brand-accent); font-weight: 600; margin-bottom: 1.5rem; }
    #modal-bio { margin-bottom: 1.5rem; }
    #modal-motto {
        font-style: italic;
        padding-left: 1.5rem;
        border-left: 3px solid var(--brand-accent);
        color: var(--text-light);
    }
    @media (max-width: 768px) {
        .modal-grid { grid-template-columns: 1fr; }
        #modal-img { height: 300px; }
    }

    /* --- Gallery Section --- */
    #gallery { background-color: var(--bg-dark); }
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
    .gallery-item {
        overflow: hidden;
        border-radius: var(--radius);
        position: relative;
        cursor: pointer;
        aspect-ratio: 3 / 4;
    }
    .gallery-item::after {
        content: 'Zobrazit';
        position: absolute;
        inset: 0;
        background-color: rgba(18, 18, 18, 0.7);
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: var(--font-heading);
        font-size: 1.2rem;
        opacity: 0;
        transition: opacity 0.4s ease;
    }
    .gallery-item:hover::after {
        opacity: 1;
    }
    .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }
    .gallery-item:hover img {
        transform: scale(1.05);
    }
    
    /* Lightbox styles */
    .lightbox {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    .lightbox.visible {
        opacity: 1;
        visibility: visible;
    }
    .lightbox img {
        max-width: 90vw;
        max-height: 90vh;
        transform: scale(0.9);
        transition: transform 0.4s ease;
    }
    .lightbox.visible img {
        transform: scale(1);
    }
    .lightbox-close {
        position: absolute;
        top: 2rem;
        right: 2rem;
        font-size: 3rem;
        color: white;
        cursor: pointer;
        background: none;
        border: none;
    }


    /* --- Testimonials Section --- */
    #testimonials { background-color: var(--bg-card); }
    .testimonials-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
        gap: 2rem; 
        justify-content: center;
    }
    .testimonial-card {
        background-color: var(--bg-dark); padding: 2.5rem; border-radius: var(--radius);
        border-left: 4px solid var(--brand-accent); position: relative;
    }
    .testimonial-card::before {
        content: '“'; position: absolute; top: -0.5rem; left: 1rem; font-size: 6rem;
        font-family: var(--font-heading); color: rgba(212, 162, 118, 0.1); z-index: 1; line-height: 1;
    }
    .testimonial-text { font-size: 1.1rem; line-height: 1.7; margin-bottom: 2rem; position: relative; z-index: 2; color: var(--text-light); }
    .testimonial-author { position: relative; z-index: 2; }
    .testimonial-author h4 { color: var(--text-light); font-size: 1.1rem; }
    .testimonial-author span { color: var(--brand-accent); font-size: 0.9rem; }
    .stars{letter-spacing:.1rem;color:var(--brand-accent);margin-bottom:.5rem}

    
    /* --- Estimator Section --- */
    #calculator {
      position: relative;
      overflow: visible;
      background-color: var(--bg-dark);
    }
    #calculator .section-header {
      margin-bottom: 3rem;
    }
    #calculator .aurora-background {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    #calculator .aurora-shape {
      position: absolute;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.18;
    }
    #calculator .aurora-shape.shape1 {
      width: 480px;
      height: 480px;
      background: var(--brand-accent);
      top: -10%;
      left: -5%;
      animation: move-aurora 20s infinite alternate ease-in-out;
    }
    #calculator .aurora-shape.shape2 {
      width: 420px;
      height: 420px;
      background: #833ab4;
      bottom: -15%;
      right: -10%;
      animation: move-aurora 24s infinite alternate-reverse ease-in-out;
    }
    @keyframes move-aurora {
      from { transform: translate(-50px, -30px) rotate(0deg) scale(1); }
      to { transform: translate(40px, 50px) rotate(90deg) scale(1.15); }
    }
    #calculator .calculator-shell {
      position: relative;
      z-index: 1;
    }
    #calculator .calculator-container {
      display: grid;
      grid-template-columns: minmax(240px, 290px) minmax(0, 1fr);
      gap: 0;
      background: rgba(18, 18, 18, 0.78);
      border-radius: 24px;
      border: 1px solid rgba(212, 162, 118, 0.28);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      overflow: visible;
    }
    #calculator .calculator-container::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: var(--context-bg, none);
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 0.45s ease-in-out;
      z-index: -1;
      filter: blur(3px);
    }
    #calculator .calculator-container.has-bg::before {
      opacity: 0.18;
    }
    #calculator .calculator-sidebar {
      padding: 2.75rem 2rem;
      border-right: 1px solid rgba(212, 162, 118, 0.25);
      display: flex;
      flex-direction: column;
      gap: 2.5rem;
      background: radial-gradient(circle at top left, rgba(212, 162, 118, 0.1), transparent 55%);
    }
    #calculator .sidebar-header h3 {
      font-size: 1.4rem;
      color: var(--brand-accent);
      margin-bottom: 0.35rem;
    }
    #calculator .sidebar-header p {
      font-size: 0.95rem;
      color: var(--text-muted);
    }
    #calculator .service-nav {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    #calculator .service-nav-item {
      display: flex;
      gap: 1rem;
      align-items: center;
      padding: 1rem 1.2rem;
      border-radius: 16px;
      border: 1px solid transparent;
      background: rgba(255, 255, 255, 0.02);
      color: var(--text-muted);
      cursor: pointer;
      transition: border-color 0.3s ease, background 0.3s ease, color 0.3s ease, transform 0.3s ease;
      text-align: left;
      font-weight: 600;
      font-size: 0.95rem;
    }
    #calculator .service-nav-item:focus-visible {
      outline: 2px solid var(--brand-accent);
      outline-offset: 4px;
    }
    #calculator .service-nav-item svg {
      width: 26px;
      height: 26px;
      flex-shrink: 0;
    }
    #calculator .service-nav-item:hover {
      background: rgba(255, 255, 255, 0.06);
      color: var(--text-light);
      transform: translateX(3px);
    }
    #calculator .service-nav-item.active {
      background: rgba(212, 162, 118, 0.18);
      color: var(--brand-accent);
      border-color: rgba(212, 162, 118, 0.55);
      box-shadow: 0 15px 35px rgba(212, 162, 118, 0.18);
    }
    #calculator .calculator-main {
      padding: 2.75rem 3rem;
      display: flex;
      flex-direction: column;
      position: relative;
      gap: 2rem;
    }
    #calculator .calculator-steps {
      position: relative;
      min-height: 0;
      flex: 1;
    }
    #calculator .calculator-step {
      position: static;
      display: none;
      opacity: 1;
      visibility: visible;
      transform: none;
      transition: none;
    }
    #calculator .calculator-step.active {
      display: block;
    }
    #calculator .step-header {
      margin-bottom: 2.25rem;
      text-align: left;
      max-width: 520px;
    }
    #calculator .calculator-step[data-step="1"] .step-header {
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    #calculator .step-header h3 {
      color: var(--brand-accent);
      font-size: 1.4rem;
      margin-bottom: 0.35rem;
    }
    #calculator .step2-layout {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1fr);
      gap: 2.4rem;
      align-items: start;
    }
    #calculator .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.6rem;
    }
    #calculator .form-group {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: linear-gradient(160deg, rgba(15, 15, 15, 0.9), rgba(35, 35, 35, 0.6));
      border-radius: 18px;
      padding: 1.3rem 1.4rem 1.4rem;
      border: 1px solid rgba(212, 162, 118, 0.18);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
      animation: field-in 0.45s ease forwards;
      opacity: 0;
      transform: translateY(14px);
    }
    @keyframes field-in {
      to { opacity: 1; transform: translateY(0); }
    }
    #calculator .field-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }
    #calculator .field-label {
      color: var(--text-light);
      font-size: 0.95rem;
      font-weight: 700;
      letter-spacing: 0.01em;
    }
    #calculator .field-tools {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    #calculator .field-note {
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    #calculator .form-grid input[type="number"],
    #calculator .form-grid select {
      background: rgba(10, 10, 10, 0.75);
      border: 1px solid rgba(212, 162, 118, 0.18);
      border-radius: 12px;
      padding: 0.75rem 1rem;
      color: var(--text-light);
      font-size: 1rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      width: 100%;
    }
    #calculator .field-tools input[type="number"] {
      width: 120px;
      text-align: right;
    }
    #calculator .form-grid input[type="number"]:focus,
    #calculator .form-grid select:focus {
      outline: none;
      border-color: var(--brand-accent);
      box-shadow: 0 0 0 3px rgba(212, 162, 118, 0.25);
      background: rgba(15, 15, 15, 0.85);
    }
    #calculator .form-grid input.invalid,
    #calculator .form-grid select.invalid {
      border-color: #e53e3e;
      box-shadow: 0 0 0 3px rgba(229, 62, 62, 0.2);
    }
    #calculator input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      background: rgba(212, 162, 118, 0.24);
      border-radius: 999px;
      outline: none;
    }
    #calculator input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--brand-accent);
      border-radius: 50%;
      border: 3px solid rgba(12, 12, 12, 0.9);
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    #calculator input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.05);
    }
    #calculator input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: var(--brand-accent);
      border-radius: 50%;
      border: 3px solid rgba(12, 12, 12, 0.9);
      cursor: pointer;
    }
    #calculator .toggle-field {
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
    }
    #calculator .toggle-field .field-label {
      flex: 1;
    }
    #calculator .toggle-field input[type="checkbox"] {
      width: 52px;
      height: 28px;
      border-radius: 999px;
      appearance: none;
      background: rgba(255, 255, 255, 0.12);
      position: relative;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #calculator .toggle-field input[type="checkbox"]::before {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--text-light);
      top: 3px;
      left: 4px;
      transition: transform 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
    }
    #calculator .toggle-field input[type="checkbox"]:checked {
      background: linear-gradient(145deg, var(--brand-accent-light), var(--brand-accent));
    }
    #calculator .toggle-field input[type="checkbox"]:checked::before {
      transform: translateX(24px);
    }
    #calculator .info-chip {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      border: 1px solid rgba(212, 162, 118, 0.35);
      background: rgba(255, 255, 255, 0.05);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: var(--brand-accent);
      transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.3s ease;
      flex-shrink: 0;
    }
    #calculator .info-chip:focus-visible {
      outline: 2px solid var(--brand-accent);
      outline-offset: 3px;
    }
    #calculator .info-chip svg {
      width: 16px;
      height: 16px;
    }
    #calculator .info-chip:hover,
    #calculator .info-chip[aria-expanded="true"] {
      background: rgba(212, 162, 118, 0.18);
      color: var(--text-light);
      border-color: rgba(212, 162, 118, 0.55);
      transform: translateY(-1px);
    }
    #calculator .info-popover {
      display: none;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(212, 162, 118, 0.25);
      border-radius: 14px;
      padding: 1rem 1.15rem;
      font-size: 0.85rem;
      color: var(--text-muted);
      line-height: 1.6;
    }
    #calculator .info-popover.is-visible {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    #calculator .info-popover strong {
      color: var(--text-light);
    }
    #calculator .info-close {
      align-self: flex-start;
      background: none;
      border: none;
      color: var(--brand-accent);
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.75rem;
      cursor: pointer;
      padding: 0;
    }
    #calculator .info-close:hover {
      color: var(--text-light);
    }
    #calculator .summary-panel {
      background: linear-gradient(160deg, rgba(26, 26, 26, 0.85), rgba(15, 15, 15, 0.72));
      border-radius: 20px;
      padding: 2.2rem 2rem;
      border: 1px solid rgba(212, 162, 118, 0.28);
      height: fit-content;
      position: sticky;
      top: 2rem;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    #calculator .summary-panel h4 {
      font-size: 1.15rem;
      color: var(--text-light);
      margin: 0;
    }
    #calculator .summary-panel p {
      margin: 0;
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.6;
    }
    #calculator .summary-panel ul {
      list-style: none;
      display: grid;
      gap: 1rem;
      padding: 0;
      margin: 0;
    }
    #calculator .summary-panel li {
      display: grid;
      grid-template-columns: minmax(0, 1fr) auto;
      gap: 0.75rem;
      font-size: 0.9rem;
      color: var(--text-muted);
      padding-bottom: 0.75rem;
      border-bottom: 1px solid rgba(212, 162, 118, 0.15);
    }
    #calculator .summary-panel li:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    #calculator .summary-label {
      color: var(--text-muted);
    }
    #calculator .summary-value {
      color: var(--text-light);
      font-weight: 600;
    }
    #calculator .navigation-buttons {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-top: 1.5rem;
      padding-top: 1.75rem;
      border-top: 1px solid rgba(212, 162, 118, 0.2);
      gap: 1rem;
    }
    #calculator .calc-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.55rem;
      border-radius: 999px;
      padding: 0.95rem 2.4rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      border: none;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      font-family: var(--font-body);
      font-size: 0.85rem;
    }
    #calculator .calc-btn:focus-visible {
      outline: 2px solid var(--brand-accent);
      outline-offset: 4px;
    }
    #calculator .calc-btn-primary {
      background: linear-gradient(145deg, var(--brand-accent-light), var(--brand-accent));
      color: #0d0d0d;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    #calculator .calc-btn-primary::before {
      content: '';
      position: absolute;
      inset: -4px;
      border-radius: inherit;
      background: radial-gradient(circle, rgba(212, 162, 118, 0.6), rgba(212, 162, 118, 0));
      filter: blur(12px);
      opacity: 0.75;
      z-index: -1;
      animation: pulse-glow 3s infinite ease-in-out;
    }
    @keyframes pulse-glow {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    #calculator .calc-btn-primary:hover {
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
    }
    #calculator .calc-btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    #calculator .calc-btn-secondary {
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-muted);
      border: 1px solid rgba(212, 162, 118, 0.35);
    }
    #calculator .calc-btn-secondary:hover {
      color: var(--text-light);
      background: rgba(212, 162, 118, 0.18);
      border-color: rgba(212, 162, 118, 0.55);
    }
    #calculator .result-card {
      background: linear-gradient(160deg, rgba(15, 15, 15, 0.85), rgba(35, 35, 35, 0.65));
      border: 1px solid rgba(212, 162, 118, 0.35);
      border-radius: 22px;
      padding: 3rem 2.5rem;
      text-align: center;
      display: grid;
      gap: 1.6rem;
      box-shadow: 0 25px 55px rgba(0, 0, 0, 0.55);
    }
    #calculator .result-title {
      color: var(--text-muted);
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    #calculator .result-estimate {
      font-size: clamp(2.4rem, 5vw, 3.6rem);
      font-family: var(--font-heading);
      color: var(--brand-accent);
      text-shadow: 0 0 28px rgba(212, 162, 118, 0.45);
    }
    #calculator .result-summary {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 0.85rem;
    }
    #calculator .result-summary li {
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      font-size: 0.95rem;
      color: var(--text-light);
      border-bottom: 1px solid rgba(212, 162, 118, 0.18);
      padding-bottom: 0.75rem;
    }
    #calculator .result-summary li span:first-child {
      color: var(--text-muted);
    }
    #calculator .result-summary li span:last-child {
      font-weight: 600;
    }
    #calculator .result-actions {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 0.85rem;
      justify-content: center;
    }
    #calculator .result-note {
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    @media (max-width: 1100px) {
      #calculator .calculator-container {
        grid-template-columns: 1fr;
      }
      #calculator .calculator-sidebar {
        border-right: none;
        border-bottom: 1px solid rgba(212, 162, 118, 0.25);
      }
      #calculator .service-nav {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
      }
      #calculator .calculator-main {
        padding: 2.5rem 2rem 2.75rem;
      }
      #calculator .step2-layout {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      #calculator .summary-panel {
        position: static;
        order: 2;
      }
    }
    @media (max-width: 640px) {
      #calculator .calculator-steps {
        min-height: auto;
      }
      #calculator .form-grid {
        grid-template-columns: 1fr;
      }
      #calculator .service-nav-item {
        width: 100%;
      }
      #calculator .field-tools {
        width: 100%;
        justify-content: space-between;
      }
      #calculator .field-tools input[type="number"] {
        width: 100px;
      }
      #calculator .navigation-buttons {
        flex-direction: column;
        align-items: stretch;
      }
      #calculator .calc-btn {
        width: 100%;
      }
      #calculator .result-card {
        padding: 2.5rem 1.75rem;
      }
    }


    /* --- FAQ Section --- */
    #faq { background-color: var(--bg-dark); }

    .faq-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-item {
      border-bottom: 1px solid var(--border-color);
    }

    /* Trigger */
    .faq-question {
      width: 100%;
      background: none;
      border: none;
      text-align: left;
      padding: 1.5rem 0;
      font-family: var(--font-heading);
      font-size: 1.2rem;
      color: var(--text-light);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .75rem;
    }
    .faq-question .icon {
      width: 24px;
      height: 24px;
      transition: transform .3s ease;
      flex: 0 0 auto;
    }
    /* Ikona se otočí při otevření */
    .faq-question[aria-expanded="true"] .icon,
    .faq-question.active .icon {
      transform: rotate(45deg);
    }
    .faq-question:focus-visible {
      outline: 2px solid var(--brand-accent);
      outline-offset: 2px;
    }

    /* Panel */
    .faq-answer {
      /* zavřeno */
      max-height: 0;
      overflow: hidden;
      padding: 0; /* žádná mezera, ať se „nevyboulí“ */
      transition: max-height .4s ease-out, padding .2s ease-out;
      will-change: max-height;
    }

    /* otevřeno */
    .faq-answer.is-open {
      max-height: var(--faq-open-max, 600px); /* klidně zvyšte podle potřeby */
      padding: 0 0 1.5rem 0; /* mezera pod textem jen při otevření */
    }

    /* obsah uvnitř odpovědi */
    .faq-answer p {
      margin: 0; /* držíme konzistentně odsazení přes padding kontejneru */
    }

    /* Když je použit atribut hidden v JS, panel je skutečně pryč z toku */
    .faq-answer[hidden] { display: none; }


    /* --- CTA Section --- */
    #cta { background-color: var(--bg-dark); position: relative; overflow: hidden; }
    .cta-background {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        object-fit: cover; z-index: 0; filter: brightness(0.3); opacity: 0.5;
    }
    .cta-content { 
        position: relative; z-index: 1; background-color: rgba(44, 44, 44, 0.5);
        backdrop-filter: blur(5px); padding: 3rem; border: 1px solid var(--border-color);
        border-radius: var(--radius); max-width: 800px; margin: 0 auto;
    }
    #cta-form{display:grid;gap:.75rem}
    #cta-form label{display:flex;flex-direction:column;gap:.35rem}
    #cta-form input,#cta-form select{background:var(--bg-dark);border:1px solid var(--border-color);color:var(--text-light);padding:.7rem;border-radius:var(--radius)}
    .consent{font-size:.9rem;color:var(--text-muted); flex-direction: row !important; align-items: center;}
    .cta-step { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;}
    .cta-step label:first-child { grid-column: 1 / -1;}
    .cta-step--2 label { grid-column: 1 / -1;}
    .cta-step--2 .consent { grid-column: 1 / -1;}
    #cta-form .hp{position:absolute;left:-9999px}

    /* Element that displays the estimator recommendation inside the CTA form. It appears
       between the input fields when a result from the calculator is transferred. */
    #cta-estimate-display {
        grid-column: 1 / -1;
        background: var(--bg-card);
        border: 1px dashed var(--border-color);
        border-radius: var(--radius);
        padding: 0.75rem 1rem;
        color: var(--text-light);
        font-size: 0.95rem;
        margin-top: 0.5rem;
    }

    .cta-content .btn-accent {
        position: relative;
    }
    .cta-content .btn-accent::before {
        content: '';
        position: absolute; inset: -3px;
        background: var(--brand-accent);
        border-radius: var(--radius);
        z-index: -1;
        filter: blur(15px);
        opacity: 0.7;
        animation: pulse-glow 2.5s infinite ease-in-out;
    }
    @keyframes pulse-glow {
        0%, 100% { transform: scale(1); opacity: 0.7; }
        50% { transform: scale(1.05); opacity: 1; }
    }
    .cta-content p { margin: 1rem auto 2rem auto; }
    
    /* --- Sticky CTA --- */
    #sticky-cta {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 999;
        transform: translateY(200%);
        transition: transform 0.5s ease;
    }
    #sticky-cta.visible {
        transform: translateY(0);
    }

    /* --- Form Success Modal --- */
    #form-success-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        z-index: 9995; /* Higher than team modal */
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    #form-success-overlay.visible {
        opacity: 1;
        visibility: visible;
    }
    #form-success-content {
        background-color: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        max-width: 450px;
        width: 90%;
        padding: 3rem 2rem;
        position: relative;
        text-align: center;
        transform: scale(0.9);
        transition: transform 0.4s ease;
    }
    #form-success-overlay.visible #form-success-content {
        transform: scale(1);
    }
    #form-success-close {
        position: absolute;
        top: 1rem; right: 1rem;
        background: none;
        border: none;
        color: var(--text-light);
        font-size: 2rem;
        cursor: pointer;
        line-height: 1;
    }
    #form-success-content .success-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 1.5rem auto;
        color: var(--brand-accent);
    }
    #form-success-content h3 {
        margin-bottom: 0.5rem;
        font-size: 1.8rem;
    }
    #form-success-content p {
        color: var(--text-muted);
        margin: 0 auto;
    }

   
    /* --- General Layout & Helpers --- */
    .container { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }
    .section { padding: var(--section-padding) 0; position: relative; content-visibility: auto; contain-intrinsic-size: 800px; }
    .section-transition {
      display: block;
      width: 100%;
      height: 120px;
      margin-top: -1px;
      position: relative;
    }
    .section-transition svg {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    .collapsible { overflow: hidden; max-height: 0; transition: max-height .35s ease; }
    .collapsible.is-open { max-height: 500px; }

/* Small explanatory text under form fields */
small {
  color: var(--text-muted);
  font-size: 0.85rem;
  display: block;
  margin-top: 0.15rem;
  margin-bottom: 0.5rem;
}


    /* --- Responsive & Accessibility --- */
    @media (max-width: 991px) {
        #process-line { display: none; }
    }
    @media (max-width: 768px) {
        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        .testimonials-grid {
          grid-template-columns: 1fr;
        }
        .cta-step { grid-template-columns: 1fr;}
        [data-tilt] { transform: none !important; }
        #cursor-aura { display: none; }
    }
    @media (prefers-reduced-motion: reduce){
      *{animation-duration:0.001ms !important; animation-iteration-count:1 !important; transition-duration:0.001ms !important; scroll-behavior:auto !important}
      #cursor-aura, .stats-bg-animated { display: none !important; }
    }
    
    /* --- Why Us --- */
    .why-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:1.25rem;
      margin-bottom:1.5rem;
    }
    .why-card{
      background:var(--bg-card);
      border:1px solid var(--border-color);
      border-radius:var(--radius);
      padding:1.25rem 1.25rem 1.1rem;
      box-shadow:var(--shadow-dark);
      transition:transform .35s ease, box-shadow .35s ease, border-color .35s ease;
    }
    .why-card:hover{
      transform:translateY(-3px);
      border-color:var(--brand-accent);
      box-shadow:var(--shadow-accent-glow), var(--shadow-dark);
    }
    .why-card h3{
      margin:.5rem 0 .35rem;
      font-size:1.1rem;
      color:var(--text-light);
    }
    .why-card p{color:var(--text-muted);font-size:.98rem}
    .why-ico{
      width:40px;height:40px;color:var(--brand-accent);
    }
    .why-ico svg{width:100%;height:100%}

    .why-badges{
      display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;margin:1rem 0 0;
    }
    .badge{
      background:var(--bg-dark);
      border:1px solid var(--border-color);
      color:var(--text-muted);
      border-radius:999px;
      padding:.45rem .75rem;
      font-size:.9rem;
      white-space:nowrap;
    }
    .why-guarantee{
      margin:1.25rem auto 0;
      max-width:900px;
      text-align:center;
      background:var(--bg-dark);
      border:1px dashed var(--border-color);
      border-radius:var(--radius);
      padding:1rem 1.25rem;
      color:var(--text-light);
    }
    .why-guarantee strong{color:var(--brand-accent)}
    .why-cta{
      display:flex;gap:.75rem;justify-content:center;margin-top:1.25rem;flex-wrap:wrap;
    }

    /* --- Calculator Card & Info Popovers --- */
    .calculator-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-dark);
      position: relative;
    }

    /* Small info icons for individual form fields */
    .info-small-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--brand-accent);
      color: var(--bg-dark);
      font-size: 0.8rem;
      margin-left: 0.35rem;
      cursor: pointer;
      position: relative;
      flex-shrink: 0;
    }

    .info-small-popover {
      position: absolute;
      top: calc(100% + 6px);
      left: 50%;
      transform: translateX(-50%) translateY(8px);
      width: 260px;
      max-width: 80vw;
      background-color: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 0.75rem 1rem;
      box-shadow: var(--shadow-dark);
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .info-small-popover.visible {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .info-small-popover button.close-popover {
      position: absolute;
      top: 4px;
      right: 6px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1rem;
      cursor: pointer;
    }

    /* New wrapper for large info icons (section headings) */
    .info-icon-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--brand-accent);
      color: var(--bg-dark);
      font-size: 0.9rem;
      margin-left: 0.35rem;
      cursor: pointer;
      flex-shrink: 0;
    }

    .info-icon-wrapper .info-icon-popover {
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      width: 300px;
      max-width: 90vw;
      background-color: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 1rem 1.5rem;
      box-shadow: var(--shadow-dark);
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(8px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .info-icon-wrapper .info-icon-popover.visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .info-icon-wrapper .info-icon-popover .close-popover {
      position: absolute;
      top: 4px;
      right: 6px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1rem;
      cursor: pointer;
    }

    .calculator-heading {
      font-family: var(--font-heading);
      font-size: 1.4rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .info-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--brand-accent);
      color: var(--bg-dark);
      font-size: 0.9rem;
      cursor: pointer;
      position: relative;
      flex-shrink: 0;
    }

    .info-popover {
      position: absolute;
      top: 100%;
      left: 0;
      width: 300px;
      max-width: 90vw;
      background-color: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 1rem 1.5rem;
      box-shadow: var(--shadow-dark);
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .info-popover.visible {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .info-popover button.close-popover {
      position: absolute;
      top: 6px;
      right: 8px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.2rem;
      cursor: pointer;
    }

    /* Ensure headings span across all columns within estimator grid */
    .estimator-fields-group .calculator-heading {
      /* Span full width inside the card and separate from form fields */
      margin-bottom: 1rem;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

  </style>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/split-type@0.3.3/umd/index.min.js" defer></script>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://www.bravion.cz/#website",
      "url": "https://www.bravion.cz/",
      "name": "Bravion Security",
      "inLanguage": "cs",
      "publisher": { "@id": "https://www.bravion.cz/#org" }
    },
    {
      "@type": "WebPage",
      "@id": "https://www.bravion.cz/#webpage",
      "url": "https://www.bravion.cz/",
      "name": "Bezpečnostní agentura Brno - Ostraha majetku, Osobní ochrana, Event Security | Bravion",
      "isPartOf": { "@id": "https://www.bravion.cz/#website" },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://bravion.cz/wp-content/uploads/2025/09/Bravion-OG.png",
        "width": 1200,
        "height": 630
      },
      "inLanguage": "cs",
      "about": { "@id": "https://www.bravion.cz/#org" }
    },
    {
      "@type": "Organization",
      "@id": "https://www.bravion.cz/#org",
      "name": "Bravion Group s.r.o.",
      "legalName": "Bravion Group s.r.o.",
      "url": "https://www.bravion.cz/",
      "logo": "https://bravion.cz/wp-content/uploads/2025/07/Bravion-Logo-500-x-500-px-512-x-512-px-800-x-800-px-512-x-512-px-800-x-500-px-3.png",
      "telephone": "+420725993462",
      "email": "info@bravion.cz",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Lidická 700/19",
        "addressLocality": "Brno",
        "postalCode": "602 00",
        "addressCountry": "CZ"
      },
      "sameAs": [
        "https://www.facebook.com/bravion",
        "https://www.linkedin.com/company/bravion"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+420725993462",
        "contactType": "customer service",
        "areaServed": "CZ",
        "availableLanguage": ["cs", "en"]
      }
    },
    {
      "@type": "LocalBusiness",
      "@id": "https://www.bravion.cz/#lb",
      "name": "Bravion Security",
      "url": "https://www.bravion.cz/",
      "image": "https://bravion.cz/wp-content/uploads/2025/07/Bravion-Logo-500-x-500-px-512-x-512-px-800-x-800-px-512-x-512-px-800-x-500-px-3.png",
      "telephone": "+420725993462",
      "priceRange": "$$$",
      "parentOrganization": { "@id": "https://www.bravion.cz/#org" },
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Lidická 700/19",
        "addressLocality": "Brno",
        "postalCode": "602 00",
        "addressCountry": "CZ"
      },
      "areaServed": "CZ",
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": [
            "Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"
          ],
          "opens": "00:00",
          "closes": "23:59"
        }
      ]
    },
    {
      "@type": "Service",
      "@id": "https://www.bravion.cz/#service-event-security",
      "serviceType": "Event security",
      "provider": { "@id": "https://www.bravion.cz/#org" },
      "areaServed": "CZ",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://www.bravion.cz/#cta",
        "servicePhone": { "@type": "ContactPoint", "telephone": "+420725993462" }
      }
    },
    {
      "@type": "Service",
      "@id": "https://www.bravion.cz/#service-ostraha-objektu",
      "serviceType": "Ostraha objektu a majetku",
      "provider": { "@id": "https://www.bravion.cz/#org" },
      "areaServed": "Jihomoravský kraj",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://www.bravion.cz/#cta",
        "servicePhone": { "@type": "ContactPoint", "telephone": "+420725993462" }
      }
    },
    {
      "@type": "Service",
      "@id": "https://www.bravion.cz/#service-bodyguard",
      "serviceType": "Osobní ochrana (bodyguard)",
      "provider": { "@id": "https://www.bravion.cz/#org" },
      "areaServed": "CZ",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://www.bravion.cz/#cta",
        "servicePhone": { "@type": "ContactPoint", "telephone": "+420725993462" }
      }
    },
    {
      "@type": "Service",
      "@id": "https://www.bravion.cz/#service-nocni-podniky",
      "serviceType": "Ostraha nočních podniků",
      "provider": { "@id": "https://www.bravion.cz/#org" },
      "areaServed": "CZ",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://www.bravion.cz/#cta",
        "servicePhone": { "@type": "ContactPoint", "telephone": "+420725993462" }
      }
    },
    {
      "@type": "Service",
      "@id": "https://www.bravion.cz/#service-sport",
      "serviceType": "Zabezpečení sportovních utkání",
      "provider": { "@id": "https://www.bravion.cz/#org" },
      "areaServed": "CZ",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://www.bravion.cz/#cta",
        "servicePhone": { "@type": "ContactPoint", "telephone": "+420725993462" }
      }
    },
    {
      "@type": "FAQPage",
      "@id": "https://www.bravion.cz/#faq",
      "inLanguage": "cs",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Kolik stojí ostraha akce?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Cena se odvíjí od velikosti, rizikovosti a počtu pracovníků. Připravíme vám nabídku na míru."
          }
        },
        {
          "@type": "Question",
          "name": "Jak rychle umíte nastoupit?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Obvykle do 48 hodin po potvrzení objednávky."
          }
        },
        {
          "@type": "Question",
          "name": "Máte pojištění odpovědnosti?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Ano, pojištění odpovědnosti do 5 mil. Kč."
          }
        }
      ]
    }
  ]
  }
  </script>

</head>
<body class="loading">
  <a href="#main" class="skip-link">Přeskočit na hlavní obsah</a>
  <!-- Sitemap and robots.txt will be handled by the production environment. -->
  <div id="preloader">
    <img src="https://bravion.cz/wp-content/uploads/2025/07/Bravion-Logo-500-x-500-px-512-x-512-px-800-x-800-px-512-x-512-px-800-x-500-px-3.png"
         alt="Bravion Logo" class="preloader-logo" width="250" height="250">
    <div class="spinner"></div>
  </div>
  
  <div id="scroll-progress"></div>
  <div id="cursor-aura"></div>
  <div class="grid-background" aria-hidden="true"></div>

  <main id="main">
    <!-- HERO SECTION -->
    <section id="hero">
        <div class="hero-background">
          <img id="hero-bg-img"
              src="https://bravion.cz/wp-content/uploads/2025/08/d9fd1e7a-056d-493d-bea8-af7a2165f87a-e1759008703118.jpg"
              srcset="https://bravion.cz/wp-content/uploads/2025/08/d9fd1e7a-056d-493d-bea8-af7a2165f87a-e1759008703118.jpg 1280w, https://bravion.cz/wp-content/uploads/2025/08/d9fd1e7a-056d-493d-bea8-af7a2165f87a-e1759008703118.jpg 1920w"
              sizes="100vw" width="1920" height="1280" alt="Bezpečnostní agentura Bravion v akci na velkém eventu"
              fetchpriority="high" decoding="async">
        </div>
        <div class="hero-content">
          <h1>Bezpečnostní agentura Brno a celá ČR</h1>
          <h2 class="hero-subheading">Zajišťujeme klid pro vaše akce, majetek i osobní bezpečí. S nástupem do 48 hodin po celé ČR.</h2>
          <div class="hero-claim">
            <span>Dlouholetá praxe v ochraně osob a majetku</span>
            <span>Bezpečnostní řešení pro každý typ objektu a akce</span>
          </div>
          <ul class="hero-trust"></ul>
          <div class="hero-quick-form">
            <button class="btn btn-secondary" id="quick-toggle" aria-expanded="false" aria-controls="quick-form"> Rychlá poptávka (30 s) </button>
            <form id="quick-form" data-analytics="hero_quick_quote" class="quick-form collapsed" action="https://formspree.io/f/mkgqozbw" method="POST">
              <label> Typ služby
                <select name="typ" required>
                  <option>Event security</option>
                  <option>Ostraha objektu</option>
                  <option>Osobní ochrana</option>
                  <option>Ostraha nočních podniků</option>
                </select>
              </label>
              <label> Termín
                <input type="date" name="termin" required>
              </label>
              <label> Telefon
                <input type="tel" name="telefon" inputmode="tel" autocomplete="tel" required>
              </label>
              <input type="text" name="company" class="hp" tabindex="-1" autocomplete="off" aria-hidden="true">
              <button class="btn btn-accent" type="submit">Odeslat</button>
              <small class="form-note">Na dotaz reagujeme obvykle ještě tentýž den</small>
            </form>
          </div>
          <div class="hero-contact-quick">
            <a href="tel:+420725993462">📞 +420 725 993 462</a>
            <a href="mailto:info@bravion.cz">✉️ info@bravion.cz</a>
          </div>
        </div>
    </section>

    <!-- CLIENTS SECTION -->
    <section id="clients">
        <div class="container">
            <h3 class="clients-title">Případové studie a spolupráce</h3>
            <div class="cases-grid">
              <article class="case">
                <h4>Rock for People</h4>
                <span class="case-partner">ve spolupráci s Čechymen</span>
                <ul>
                 <li>Dohled nad klíčovými zónami - vstupy, stage, zázemí, pohyb návštěvníků a kordinace vozidel.</li>
                  <li>Plánování a koordinace bezpečnostních opatření před i během akce.</li>
                  <li><strong>Výsledek:</strong> akce proběhla hladce, bez incidentů a v bezpečném prostředí.</li>
                </ul>
              </article>
              <article class="case">
                <h4>Hrady CZ (Turné)</h4>
               <span class="case-partner">ve spolupráci s Ares Group</span>
<ul>
  <li>Podíleli jsme se na zajištění bezpečnosti jednotlivých zastávek turné.</li>
  <li>Dohled nad klíčovými zónami – od vstupů po zázemí a návštěvnické prostory.</li>
  <li><strong>Výsledek:</strong> všechny zastávky festivalu proběhly hladce a bez incidentů.</li>
</ul>
</article>
                  
<article class="case">
  <h4>Masters of Rock</h4>
  <span class="case-partner">ve spolupráci s Čechymen</span>
  <ul>
    <li>Podíleli jsme se na zajištění bezpečného chodu festivalu.</li>
    <li>Dohled nad přístupovými cestami, hlavní scénou i zázemím účinkujících.</li>
    <li><strong>Výsledek:</strong> Návštěvníci i kapely si mohli užít akci bez starostí.</li>
  </ul>
</article>
            </div>
            <div class="clients-grid" style="margin-top: 3rem;">
                <div class="client-logo" data-magnetic><img src="https://scontent.fprg4-1.fna.fbcdn.net/v/t39.30808-6/277741094_398818235577444_401706843692727110_n.png?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=DbdNzdCmpT0Q7kNvwH17tBh&_nc_oc=AdlUBXG666R15QXLDly9UmS70E5378Cnd3v2UygHbeUjYEvqIcAj6wI8hh0yIWDmYPY&_nc_zt=23&_nc_ht=scontent.fprg4-1.fna&_nc_gid=8anZW4o5gUx-Kdg1B3PEwg&oh=00_AfZxBbOxEvAk7l4ILqfsrzLU41mK34vu0aq58J9oho1zig&oe=68DE50DC" alt="Logo klienta Ares Group" width="150" height="60"></div>
                <div class="client-logo" data-magnetic><img src="https://scontent.fprg4-1.fna.fbcdn.net/v/t39.30808-6/305656828_481733930630331_2534088003234222894_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=AXTtr2EJWm8Q7kNvwFb-2lg&_nc_oc=AdnVk5NB7KzPimfQPFAcbC3TMb5fUEce1oC7EnefSdbC2EXPH-DINFkBpAqU4kbgL4Y&_nc_zt=23&_nc_ht=scontent.fprg4-1.fna&_nc_gid=iSJaZctEku2NzwgGS-kWqg&oh=00_AfaeXFaV0-3zroTdNKg4OtiyEH17ZTec2tGoVTDEbOn6JQ&oe=68DE433B" alt="Logo klienta Čechymen" width="150" height="60"></div>
                <div class="client-logo" data-magnetic><img src="https://scontent.fprg4-1.fna.fbcdn.net/v/t39.30808-6/271153888_4038333066270418_6162506973992446003_n.png?_nc_cat=103&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=KdseyKV1VQ0Q7kNvwEzRJth&_nc_oc=AdnKO8Yx1jL9qt-GiRrkXscunRJenaJXtvDcavEjZkFNCmGC1x6ZWJdDn-AgswTRsZA&_nc_zt=23&_nc_ht=scontent.fprg4-1.fna&_nc_gid=Zk1YbxUQZu4U-3KsFNOvCA&oh=00_AfZdEx3-PeAhcDIJ13H-6-ZRIsv7HwgA16SaeaEBlnIDFw&oe=68DE4858" alt="Logo klienta No limit" width="150" height="60"></div>
                <div class="client-logo" data-magnetic><img src="https://cdn.myshoptet.com/usr/714187.myshoptet.com/user/logos/soft_green_typography_letter_n_logo_(453_x_276_px)_(1000_x_1000_px)_(295_x_60_px).png" alt="Logo klienta Cleanwave" width="150" height="60"></div>
                <div class="client-logo" data-magnetic><img src="https://placehold.co/150x40/f5f5f5/1a1a1a?text=Hellas" alt="Logo klienta Hellas" width="150" height="60"></div>
            </div>
        </div>
    </section>

    <!-- SECTION TRANSITION -->
    <div class="section-transition" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none" style="fill: var(--bg-dark);">
            <path d="M0,0 C25,50 75,50 100,0 L100,100 L0,100 Z" opacity="0.5"></path>
            <path d="M0,10 C35,60 65,40 100,10 L100,100 L0,100 Z"></path>
        </svg>
    </div>


 <!-- ABOUT SECTION – Bravion Group -->
<section id="about" class="section bg-dark text-white">
  <div class="container about-grid">
    <div class="about-text">
      <h2 class="accent-text" data-animate-text>Bezpečnost postavená na zkušenosti</h2>
      <p>
        Zajišťujeme hlídání objektů, akcí i osob. Naší prací je udržet klid a předcházet problémům. 
        Působíme v Brně, Jihomoravském kraji a po domluvě i jinde v ČR.
      </p>

      <ul class="about-values">
        <li>
          <svg class="animated-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 9l9-6 9 6v9a3 3 0 01-3 3H6a3 3 0 01-3-3z"/></svg>
          <div>
            <h3>Spolehlivost</h3>
            <p>Dodržujeme sjednané časy, plníme dohody a vždy přesně víte, kdo a kdy službu zajišťuje.</p>
          </div>
        </li>
        <li>
          <svg class="animated-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
          <div>
            <h3>Odbornost</h3>
            <p>Členové týmu procházejí pravidelným školením. Umíme řešit konfliktní situace bez zbytečného rizika.</p>
          </div>
        </li>
        <li>
          <svg class="animated-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 22s8-4 8-10a8 8 0 10-16 0c0 6 8 10 8 10z"/></svg>
          <div>
            <h3>Pojištění 5 mil. Kč</h3>
            <p>Máme sjednané pojištění odpovědnosti, aby byl krytý i neočekávaný problém.</p>
          </div>
        </li>
      </ul>

      <div class="about-usps">
        <div><strong>Rychlý nástup</strong><br><span>bez zbytečného odkladu</span></div>
        <div><strong>Přehledná evidence</strong><br><span>detailní záznam každé směny</span></div>
        <div><strong>Stálý kontakt</strong><br><span>kdykoli víte, na koho se obrátit</span></div>
      </div>

      
    </div>

    <div class="about-image-wrapper">
      <img
        src="https://bravion.cz/wp-content/uploads/2025/05/S.Ntry500x600px500x600px3.png"
        alt="Bravion – profesionální hlídání objektů a akcí"
        loading="lazy" width="500" height="600"
        class="about-image rounded-xl shadow-xl"
      >
    </div>
  </div>
</section>

    
   <!-- WHY US -->
<section id="why-us" class="section bg-dark text-white">
  <div class="container">
    <div class="section-header">
      <h2 data-animate-text>Proč spolupracovat s Bravion</h2>
      <p>Bezpečnost bereme jako službu, ne jen hlídání. Každou zakázku řešíme osobně a s plnou odpovědností.</p>
    </div>

    <div class="why-grid">
      <article class="why-card">
        <h3>Přímý kontakt</h3>
        <p>Mluvíte rovnou s lidmi, kteří službu plánují a vedou. Žádné zdlouhavé schvalování.</p>
      </article>

      <article class="why-card">
        <h3>Jasné podmínky</h3>
        <p>Cena i rozsah práce jsou dohodnuté předem. Bez skrytých poplatků.</p>
      </article>

      <article class="why-card">
        <h3>Profesionální zajištění</h3>
        <p>Pravidelná školení, platné pojištění odpovědnosti a dodržování GDPR jsou samozřejmost.</p>
      </article>

      <article class="why-card">
        <h3>Pružné řešení</h3>
        <p>Přizpůsobíme se velikosti a povaze akce – od malých prostor až po velké veřejné události.</p>
      </article>

      <article class="why-card">
        <h3>Rychlý start spolupráce</h3>
        <p>Po dohodě dokážeme nasadit tým ve velmi krátké době, podle potřeby zakázky.</p>
      </article>

      <article class="why-card">
        <h3>Ověření partneři</h3>
        <p>Na rozsáhlejší akce spolupracujeme s předními bezpečnostními agenturami, abychom zajistili dostatek pracovníků i kvalitu.</p>
      </article>
    </div>

    <div class="why-cta">
      <a class="btn btn-accent" href="#cta">Nezávazná konzultace</a>
      <a class="btn btn-secondary" href="tel:+420725993462">Zavolat +420 725 993 462</a>
    </div>
  </div>
</section>

    
<!-- STATS SECTION -->
<section id="stats" class="section bg-dark text-white">
  <svg class="stats-bg-animated" width="100%" height="100%" aria-hidden="true"></svg>
  <div class="container">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-number" data-target="5">0</span>mil.
        <p class="stat-label">pojistné krytí</p>
      </div>
      <div class="stat-item">
        <span class="stat-number" data-target="10">0</span>+
        <p class="stat-label">let zkušeností v bezpečnostních službách</p>
      </div>
      <div class="stat-item">
        <span class="stat-number" data-target="60">0</span>+
        <p class="stat-label">akcí zajišťovaných během jedné letní sezóny</p>
      </div>
      <div class="stat-item">
        <span class="stat-number" data-target="90">0</span> %
        <p class="stat-label">zakázek probíhá hladce a bez mimořádných událostí</p>
      </div>
    </div>
  </div>
</section>


    <!-- SECTION TRANSITION -->
    <div class="section-transition" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none" style="fill: var(--bg-card);">
            <path d="M0,100 C25,50 75,50 100,100 L100,0 L0,0 Z" opacity="0.5"></path>
            <path d="M0,90 C35,40 65,60 100,90 L100,0 L0,0 Z"></path>
        </svg>
    </div>

    <!-- SERVICES SECTION – upravená verze -->
<section id="services" class="section bg-dark text-white">
  <div class="container">
    <div class="section-header">
      <h2 data-animate-text>Naše hlavní služby</h2>
      <p>Zajistíme bezpečnost lidí, majetku i celých akcí. Každou zakázku řešíme individuálně a s plnou odpovědností.</p>
    </div>

    <div class="services-grid">
      <div class="service-card" data-tilt>
        <div class="service-card-image-content">
          <img loading="lazy" width="600" height="400" src="https://bravion.cz/wp-content/uploads/2025/08/9270db9022017edf3e8b2a8942561aea.jpeg" alt="Zajištění bezpečnosti na veřejných akcích" class="service-card-bg">
          <div class="service-card-content">
            <svg class="service-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/></svg>
            <h3>Event security</h3>
            <p>Bezpečné zajištění koncertů, festivalů a firemních akcí v Brně i po celé ČR.</p>
          </div>
        </div>
        <div class="service-details">
          <button class="service-toggle" aria-expanded="false" aria-controls="service-includes-1">Co je součástí</button>
          <ul id="service-includes-1" class="service-includes collapsible" hidden>
            <li>Analýza rizik a plán akce</li>
            <li>Koordinátor a vyškolený tým</li>
            <li>Poakční report a fotodokumentace</li>
          </ul>
        </div>
      </div>

      <div class="service-card" data-tilt>
        <div class="service-card-image-content">
          <img loading="lazy" width="600" height="400" src="https://bravion.cz/wp-content/uploads/2025/09/bariyer-ve-otomatik-gecis-sistemleri-5.jpeg" alt="Fyzická ostraha objektů" class="service-card-bg">
          <div class="service-card-content">
            <svg class="service-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21M3 3h18M3 7.5h18M3 12h18m-4.5 9v-6.75a2.25 2.25 0 00-2.25-2.25h-1.5a2.25 2.25 0 00-2.25 2.25V21" /></svg>
            <h3>Ostraha majetku</h3>
            <p>Stálý dohled nad objekty, sklady, stavbami a dalšími prostory.</p>
          </div>
        </div>
        <div class="service-details">
          <button class="service-toggle" aria-expanded="false" aria-controls="service-includes-2">Co je součástí</button>
          <ul id="service-includes-2" class="service-includes collapsible" hidden>
            <li>Recepce a pravidelné kontroly</li>
            <li>Napojení na kamerový systém</li>
            <li>Možnost zásahové jednotky</li>
          </ul>
        </div>
      </div>

      <div class="service-card" data-tilt>
        <div class="service-card-image-content">
          <img loading="lazy" width="600" height="400" src="https://bravion.cz/wp-content/uploads/2025/05/S.Ntry500x600px8.png" alt="Diskrétní osobní ochrana" class="service-card-bg">
          <div class="service-card-content">
            <svg class="service-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
            <h3>Osobní ochrana</h3>
            <p>Diskrétní doprovod a ochrana pro jednotlivce i rodiny, včetně řidiče-bodyguarda.</p>
          </div>
        </div>
        <div class="service-details">
          <button class="service-toggle" aria-expanded="false" aria-controls="service-includes-3">Co je součástí</button>
          <ul id="service-includes-3" class="service-includes collapsible" hidden>
            <li>Vyhodnocení rizik a plán tras</li>
            <li>Doprovod a monitoring</li>
            <li>Vozidlo s řidičem-bodyguardem</li>
          </ul>
        </div>
      </div>

      <div class="service-card" data-tilt>
        <div class="service-card-image-content">
          <img loading="lazy" width="600" height="400" src="https://bravion.cz/wp-content/uploads/2025/09/stahnout-1-1-scaled-e1758999228345.png" alt="Zabezpečení sportovních utkání" class="service-card-bg">
          <div class="service-card-content">
            <svg class="service-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.324l5.584.427a.563.563 0 01.31.958l-4.232 3.873a.563.563 0 00-.182.557l1.258 5.385a.563.563 0 01-.815.61l-5.076-2.884a.563.563 0 00-.58 0L4.482 21.44a.563.563 0 01-.815-.61l1.258-5.385a.563.563 0 00-.182-.557l-4.232-3.873a.563.563 0 01.31-.958l5.584-.427a.563.563 0 00.475-.324L11.48 3.5z" /></svg>
            <h3>Sportovní akce</h3>
            <p>Kompletní pořadatelská služba a bezpečné sektory pro fanoušky i hráče.</p>
          </div>
        </div>
        <div class="service-details">
          <button class="service-toggle" aria-expanded="false" aria-controls="service-includes-4">Co je součástí</button>
          <ul id="service-includes-4" class="service-includes collapsible" hidden>
            <li>Pořadatelský tým</li>
            <li>Kontrola vstupů a sektorů</li>
            <li>Spolupráce s policií a pořadateli</li>
          </ul>
        </div>
      </div>

      <div class="service-card" data-tilt>
        <div class="service-card-image-content">
          <img loading="lazy" width="600" height="400" src="https://bravion.cz/wp-content/uploads/2025/09/sec-800-x-800-px-700-x-800-px-600-x-800-px-800-x-200-px-200-x-200-px-200-x-200-px.png" alt="Ostraha nočních podniků" class="service-card-bg">
          <div class="service-card-content">
            <svg class="service-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 10.5V6.75a4.5 4.5 0 00-4.5-4.5h-5.25a4.5 4.5 0 00-4.5 4.5v3.75m14.25 0v4.5a4.5 4.5 0 01-4.5-4.5h-5.25a4.5 4.5 0 01-4.5-4.5v-4.5m14.25 0h-14.25" /></svg>
            <h3>Noční podniky</h3>
            <p>Bezpečné prostředí pro hosty i personál – prevence konfliktů a klidný provoz.</p>
          </div>
        </div>
        <div class="service-details">
          <button class="service-toggle" aria-expanded="false" aria-controls="service-includes-5">Co je součástí</button>
          <ul id="service-includes-5" class="service-includes collapsible" hidden>
            <li>Kontrola vstupu</li>
            <li>Monitoring prostor</li>
            <li>Rychlé řešení incidentů</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>


     <!-- ESTIMATOR SECTION -->
    <section id="calculator" class="section">
      <div class="aurora-background" aria-hidden="true">
        <div class="aurora-shape shape1"></div>
        <div class="aurora-shape shape2"></div>
      </div>
      <div class="container calculator-shell">
        <div class="section-header">
          <h2 data-animate-text>Inteligentní plánovač bezpečnosti</h2>
          <p>Tento orientační návrh vám pomůže získat představu. Přesný plán navrhneme po úvodním kontaktu a detailní analýze vašich potřeb.</p>
        </div>
        <div id="calculator-container" class="calculator-container">
          <aside class="calculator-sidebar">
            <div class="sidebar-header">
              <h3>Služby</h3>
              <p>Vyberte si oblast</p>
            </div>
            <nav id="service-nav" class="service-nav">
              <button class="service-nav-item" data-service="object" data-bg="https://images.unsplash.com/photo-1581092446347-a8b2f1597a1d?auto=format&fit=crop&w=800&q=60">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M54 57H10C8.89543 57 8 56.1046 8 55V15C8 13.8954 8.89543 13 10 13H54C55.1046 13 56 13.8954 56 15V55C56 56.1046 55.1046 57 54 57Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 13V9C18 7.89543 18.8954 7 20 7H44C45.1046 7 46 7.89543 46 9V13" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 23H26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 33H26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 43H26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M38 23H42" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M38 33H42" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M38 43H42" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Ostraha objektu</span>
              </button>
              <button class="service-nav-item" data-service="vip" data-bg="https://images.unsplash.com/photo-1621601433342-23736822b311?auto=format&fit=crop&w=800&q=60">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32 30C37.5228 30 42 25.5228 42 20C42 14.4772 37.5228 10 32 10C26.4772 10 22 14.4772 22 20C22 25.5228 26.4772 30 32 30Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M48.61 54C48.61 47.9 41.1 43 32 43C22.9 43 15.39 47.9 15.39 54" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M51 7L57 13" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 13L13 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Osobní ochrana</span>
              </button>
              <button class="service-nav-item" data-service="event" data-bg="https://images.unsplash.com/photo-1511795409834-ef04bbd51622?auto=format&fit=crop&w=800&q=60">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 26L32 12L50 26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 32V52H46V32" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M26 52V40C26 37.7909 27.7909 36 30 36H34C36.2091 36 38 37.7909 38 40V52" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M55 42L50 45" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 42L14 45" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M52 30L56 26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 30L8 26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Event security</span>
              </button>
              <button class="service-nav-item" data-service="sport" data-bg="https://images.unsplash.com/photo-1541250848049-b9f71a6e8e88?auto=format&fit=crop&w=800&q=60">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32 57C45.8071 57 57 45.8071 57 32C57 18.1929 45.8071 7 32 7C18.1929 7 7 18.1929 7 32C7 45.8071 18.1929 57 32 57Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M32 7C27.5 16.5 27.5 22.5 32 32C36.5 22.5 36.5 16.5 32 7Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M57 32C47.5 36.5 41.5 36.5 32 32C41.5 27.5 47.5 27.5 57 32Z" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 32H57" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M32 7V57" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Sportovní utkání</span>
              </button>
              <button class="service-nav-item" data-service="club" data-bg="https://images.unsplash.com/photo-1582220107107-590426d242c8?auto=format&fit=crop&w=800&q=60">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32 20C32 15.5817 28.4183 12 24 12C19.5817 12 16 15.5817 16 20C16 23.5 18.5 26.3 21.6 27.5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M48 20C48 15.5817 44.4183 12 40 12C35.5817 12 32 15.5817 32 20C32 23.5 34.5 26.3 37.6 27.5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 20H10C8.89543 20 8 20.8954 8 22V50C8 51.1046 8.89543 52 10 52H54C55.1046 52 56 51.1046 56 50V22C56 20.8954 55.1046 20 54 20H48" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M32 28V38L40 43" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Noční podniky</span>
              </button>
            </nav>
          </aside>
          <main class="calculator-main">
            <form id="estimator-form" onsubmit="event.preventDefault();">
              <div class="calculator-steps">
                <div class="calculator-step active" data-step="1">
                  <div class="step-header" style="margin-top: 3rem;">
                    <h2>Plánovač bezpečnosti</h2>
                    <p>Vyberte v levém panelu scénář, který nejlépe odpovídá vaší situaci. Po zadání parametrů získáte orientační návrh personálního zajištění.</p>
                  </div>
                </div>
                <div class="calculator-step" data-step="2">
                  <div class="step-header">
                    <h3 id="step2-title">Specifikace služby</h3>
                    <p>Zadejte parametry, které nám pomohou přesněji určit potřebný počet pracovníků.</p>
                  </div>
                  <div class="step2-layout">
                    <div id="form-fields-container" class="form-grid"></div>
                    <aside id="summary-panel" class="summary-panel" aria-live="polite"></aside>
                  </div>
                </div>
                <div class="calculator-step" data-step="3">
                  <div id="result-container" class="result-card" aria-live="polite"></div>
                </div>
              </div>

              <select name="service_type" id="service-type-select" hidden>
                <option value="object">Ostraha objektu</option>
                <option value="vip">Osobní ochrana</option>
                <option value="event">Event security</option>
                <option value="sport">Sportovní utkání</option>
                <option value="club">Ostraha nočních podniků</option>
              </select>

              <div class="navigation-buttons">
                <button type="button" id="btn-calculate" class="calc-btn calc-btn-primary" style="display:none;">Vypočítat odhad</button>
              </div>
            </form>
          </main>
        </div>
      </div>
    </section>
    

    <!-- SECTION TRANSITION -->
    <div class="section-transition" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none" style="fill: var(--bg-dark);">
            <path d="M0,0 C25,50 75,50 100,0 L100,100 L0,100 Z" opacity="0.5"></path>
            <path d="M0,10 C35,60 65,40 100,10 L100,100 L0,100 Z"></path>
        </svg>
    </div>

   <!-- PROCESS SECTION -->
<section id="process" class="section" style="background-color: var(--bg-dark);">
  <div class="container">
    <div class="section-header">
      <h2 data-animate-text>Jak s vámi pracujeme – 3 jednoduché kroky</h2>
      <p>Bezpečnost bereme vážně, ale komunikujeme na rovinu. Od prvního hovoru až po samotnou akci víte, co děláme a proč.</p>
    </div>

    <div class="process-steps">
      <svg id="process-line" width="100%" height="2px" preserveAspectRatio="none" aria-hidden="true">
        <path id="process-line-path" d="M0 1 H2000" stroke="var(--border-color)" stroke-width="2" fill="none" />
      </svg>

      <div class="process-step">
        <div class="process-step-number">1</div>
        <h3>Úvodní konzultace</h3>
        <p>Nejdřív si v klidu projdeme vaše plány. Zeptáme se na důležité detaily a navrhneme, co dává smysl pro bezpečný průběh.</p>
        <ul class="deliverables">
          <li>Krátká konzultace a základní risk-scan</li>
          <li>Návrh řešení v přehledném shrnutí</li>
        </ul>
      </div>

      <div class="process-step">
        <div class="process-step-number">2</div>
        <h3>Připravíme plán</h3>
        <p>Z návrhu uděláme konkrétní plán – kolik lidí je potřeba, jaké vybavení a kdy co zajistit. Vše máte černé na bílo.</p>
        <ul class="deliverables">
          <li>Jasný harmonogram a rozpis zodpovědností</li>
          <li>Doporučení techniky a postupů</li>
        </ul>
      </div>

      <div class="process-step">
        <div class="process-step-number">3</div>
        <h3>Den D</h3>
        <p>Ve smluvený termín jsme na místě a děláme svou práci, aby vše proběhlo podle plánu. Vy máte jistotu, že je o všechno postaráno.</p>
        <ul class="deliverables">
          <li>Nasazení týmu a potřebné techniky</li>
          <li>Průběžné informace a finální shrnutí</li>
        </ul>
      </div>
    </div>
  </div>
</section>

    
    <!-- TEAM SECTION -->
    <section id="team" class="section">
        <div class="container">
            <div class="section-header">
                <h2 data-animate-text>Náš tým: Tváře, kterým můžete věřit</h2>
                <p>Náš tým je naše největší síla. Každý člen je pečlivě vybrán a proškolen, abychom vám mohli zaručit 100% spolehlivost.</p>
            </div>
            <div class="team-grid">
                <div class="team-member" data-member-id="1" role="button" tabindex="0" aria-label="Zobrazit detail pro Tomáš Hozák">
                    <div class="team-member-img-wrapper">
                        <img loading="lazy" width="250" height="250" src="https://bravion.cz/wp-content/uploads/2025/08/d9fd1e7a-056d-493d-bea8-af7a2165f87a-e1758974869670.jpg" alt="Člen týmu Bravion">
                        <div class="team-member-overlay">
                            <span>Jednatel &amp; Majitel</span>
                            <span class="plus-icon">+</span>
                        </div>
                    </div>
                    <h3>Tomáš Hozák</h3>
                    <p>Jednatel &amp; Majitel</p>
                </div>
                <div class="team-member" data-member-id="2" role="button" tabindex="0" aria-label="Zobrazit detail pro David Hudák">
                    <div class="team-member-img-wrapper">
                        <img loading="lazy" width="250" height="250" src="https://scontent.fprg4-1.fna.fbcdn.net/v/t1.6435-9/33806402_1642514525786041_309828400883695616_n.jpg?_nc_cat=105&amp;ccb=1-7&amp;_nc_sid=833d8c&amp;_nc_ohc=9_EABP33xyMQ7kNvwGI49gk&amp;_nc_oc=Adk81HCh0zp9qMJsIfb69kd6Ed3koBWvNngWhug9gUl6PC09BIs-HM2Nk9Q1tjK1SC0&amp;_nc_zt=23&amp;_nc_ht=scontent.fprg4-1.fna&amp;_nc_gid=Eo3UpTv6jOEPWLlPbEzAVA&amp;oh=00_AfbfhzTT0KKddfKVSJvkDcUh_j6XO7KrvX2DHjG5wlK29w&amp;oe=68FF43C1" alt="Člen týmu Bravion">
                        <div class="team-member-overlay">
                            <span>Provozní Supervizor</span>
                            <span class="plus-icon">+</span>
                        </div>
                    </div>
                    <h3>David Hudák</h3>
                    <p>Provozní Supervizor</p>
                </div>
                <div class="team-member" data-member-id="3" role="button" tabindex="0" aria-label="Zobrazit detail pro Kristýna Voksová">
                    <div class="team-member-img-wrapper">
                        <img loading="lazy" width="250" height="250" src="https://scontent.fprg4-1.fna.fbcdn.net/v/t1.6435-9/118765242_4567164523324066_4486028877719179790_n.jpg?_nc_cat=104&amp;ccb=1-7&amp;_nc_sid=6ee11a&amp;_nc_ohc=3STTIpbQrMoQ7kNvwGmK9nV&amp;_nc_oc=AdkUySqzVJFBzKtsCLhiIVoWFPgKRyQsIYwMCB8dCSiPz4uIiPGCa0LUFYD7dKdCFBY&amp;_nc_zt=23&amp;_nc_ht=scontent.fprg4-1.fna&amp;_nc_gid=EZH7SqJhsuqIegooOSvHGg&amp;oh=00_AfYRf-YyrbXvPHrJ4AUeDIevvXhabl-1dhXTFO2cnbpZtg&amp;oe=68FF4F58" alt="Člen týmu Bravion" class="voksova-img">
                        <div class="team-member-overlay">
                            <span>HR Asistentka</span>
                             <span class="plus-icon">+</span>
                        </div>
                    </div>
                    <h3>Kristýna Voksová</h3>
                    <p>HR Asistentka</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- GALLERY SECTION (NEW) -->
    <section id="gallery" class="section" style="background-color: var(--bg-dark);">
      <div class="container">
        <div class="section-header">
          <h2 data-animate-text>Reference v obrazech</h2>
          <p>Velké akce si žádají silné partnery. Tady je několik z nich, kde jsme se podíleli na zajištění bezpečnosti a klidného průběhu.</p>
        </div>
        <div class="gallery-grid">
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/09/542519199_122168750000486917_5235837983491201776_n.jpg" alt="Event security tým Bravion na hudebním festivalu Hrady CZ"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/09/547207097_122170260368486917_835135410466602261_n.jpg" alt="Profesionální event security Znojemské Vinobraní "></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/09/545333569_122169773942486917_4214884600553985258_n.jpg" alt="Zabezpečení akce s event security Bravion"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/09/540980446_122168742752486917_5816495075006582546_n.jpg" alt="Ostraha festivalu - event security"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/533100595_122166404090486917_3104661969701634778_n-1.jpg" alt="Bezpečnostní služby pro event security"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/531952455_122166407186486917_1562894209650847436_n.jpg" alt="Kontrola vstupu na akci naším týmem"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/521880720_122163193514486917_4371983168766280091_n.jpg" alt="Ostraha VIP zóny na akci v Jihomoravském kraji"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/519420605_122162295914486917_3587218783851614825_n.jpg" alt="Pracovník ostrahy Bravion"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/517345112_122160873650486917_6271359066360853311_n.jpg" alt="Zabezpečení sportovního utkání - event security"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/516444532_122160875978486917_5803014405729944711_n.jpg" alt="Bravion Security na firemní akci"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/516390457_122165096420486917_9031548581263737840_n.jpg" alt="Ostraha nočního podniku v Brně"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/515668731_122160876242486917_4166114798104164237_n.jpg" alt="Bezpečnostní plánování pro event security"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/515440624_122160875768486917_3141510045509415353_n.jpg" alt="Profesionální ostraha na eventu"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/515040809_122164096130486917_2638483352118377269_n.jpg" alt="Diskrétní ochrana osob na společenské akci"></div>
          <div class="gallery-item"><img loading="lazy" width="600" height="800" src="https://bravion.cz/wp-content/uploads/2025/08/507129730_122161161890486917_6699242769022458858_n.jpg" alt="Tým Bravion Security zajišťuje event"></div>
        </div>
      </div>
    </section>

    <!-- TESTIMONIALS SECTION -->
    <section id="testimonials" class="section" style="background-color: var(--bg-card);">
        <div class="container">
            <div class="section-header">
              <h2 data-animate-text>Co o spolupráci říkají ostatní</h2>
            </div>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                  <div class="stars" aria-label="Hodnocení 5 z 5">★★★★★</div>
                  <p class="testimonial-text">"Děkuji moc za to, že jste byli součástí naší akce Vary Září 2024 a společně rozzářili Karlovy Vary. Spolupracovat s Vámi byla pro mě radost. Věřím a pevně doufám, že to nebyla naše poslední spolupráce a snad brzy se zas uvidíme v Karlových Varech. Přeji Vám krásnou a pohodovou cestu zpět. Jste úžasný, děkuji."</p>
                  <div class="testimonial-author">
                      
                      <span>Organizátorka, Vary Září 2024</span>
                  </div>
                </div>
                <div class="testimonial-card">
                  <div class="stars" aria-label="Hodnocení 5 z 5">★★★★★</div>
                  <p class="testimonial-text">"„I při velkém počtu návštěvníků proběhlo vše v klidu a bez problémů. Oceňujeme rychlé reakce a bezproblémovou spolupráci"</p>
                  <div class="testimonial-author">
                      
                      <span>Pořadatelský tým festivalu</span>
                  </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ SECTION -->
    <section id="faq" class="section">
        <div class="container">
            <div class="section-header">
                <h2 data-animate-text>Často kladené dotazy</h2>
            </div>
            <div class="faq-container">
                <div class="faq-item">
                    <button class="faq-question" aria-expanded="false" id="q1" aria-controls="faq1">
                        <span>Kolik stojí ostraha akce?</span>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                    </button>
                    <div class="faq-answer" id="faq1" role="region" aria-labelledby="q1">
                        <p>Cena za ostrahu akce se odvíjí od mnoha faktorů, jako je počet účastníků, velikost a typ areálu, rizikovost a požadovaný počet našich pracovníků. Pro přesnou kalkulaci nás prosím kontaktujte, rádi vám připravíme nezávaznou nabídku na míru.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <button class="faq-question" aria-expanded="false" id="q2" aria-controls="faq2">
                        <span>Jak funguje bodyguard služba?</span>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                    </button>
                    <div class="faq-answer" id="faq2" role="region" aria-labelledby="q2">
                        <p>Služba osobní ochrany (bodyguard) je maximálně diskrétní a přizpůsobená vašemu životnímu stylu. Po úvodní konzultaci a analýze rizik vám přidělíme osobního strážce nebo tým, který zajistí vaši bezpečnost při všech aktivitách, ať už jde o pracovní cesty, společenské události nebo soukromý čas.</p>
                    </div>
                </div>
                 <div class="faq-item">
                    <button class="faq-question" aria-expanded="false" id="q3" aria-controls="faq3">
                        <span>Působíte pouze v Brně?</span>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                    </button>
                    <div class="faq-answer" id="faq3" role="region" aria-labelledby="q3">
                        <p>Naše hlavní sídlo je v Brně, ale naše služby poskytujeme po celém Jihomoravském kraji a po dohodě i v rámci celé České republiky. Pro větší projekty a dlouhodobou spolupráci jsme schopni zajistit ostrahu kdekoliv je potřeba.</p>
                    </div>
                </div>
                 <div class="faq-item">
                  <button class="faq-question" aria-expanded="false" id="q4" aria-controls="faq4"><span>Jak rychle umíte nastoupit?</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg></button>
                  <div class="faq-answer" id="faq4" role="region" aria-labelledby="q4"><p>Obvykle do 48 hodin od potvrzení objednávky, u pravidelných služeb dle individuální domluvy.</p></div>
                </div>
                <div class="faq-item">
                  <button class="faq-question" aria-expanded="false" id="q5" aria-controls="faq5"><span>Máte pojištění odpovědnosti?</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg></button>
                  <div class="faq-answer" id="faq5" role="region" aria-labelledby="q5"><p>Ano, samozřejmostí je pojištění odpovědnosti za škodu do výše 5 milionů Kč.</p></div>
                </div>
                <div class="faq-item">
                  <button class="faq-question" aria-expanded="false" id="q6" aria-controls="faq6"><span>Pracujete i mimo Jihomoravský kraj?</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg></button>
                  <div class="faq-answer" id="faq6" role="region" aria-labelledby="q6"><p>Ano, ačkoliv je naší primární lokalitou Brno a Jihomoravský kraj, po dohodě zajišťujeme bezpečnostní služby po celé České republice.</p></div>
                </div>
            </div>
        </div>
    </section>

    <section id="cta" class="section">
        <img loading="lazy" src="https://bravion.cz/wp-content/uploads/2025/07/518358837_1322492385903170_7904239106560120937_n.jpg" alt="Bezpečnostní služby na akci" class="cta-background">
        <div class="container">
            <div class="cta-content">
                <h2 data-animate-text>Pojďme navrhnout bezpečné řešení</h2>
                <p>Nezávazná konzultace zdarma. Ozveme se v pracovních dnech do 24 hodin.</p>

                <form id="cta-form" action="https://formspree.io/f/mkgqozbw" method="POST">
                  <div class="cta-step cta-step--1">
                    <label>Jakou službu hledáte?
                      <select name="typ" required id="cta-service-select">
                        <option>Event security</option>
                        <option>Ostraha objektu</option>
                        <option>Osobní ochrana</option>
                        <option>Sportovní utkání</option>
                        <option>Ostraha nočních podniků</option>
                      </select>
                    </label>
                    <label>Termín / období
                      <input type="text" name="kdy" placeholder="např. 12. 6. – 14. 6. 2025" required>
                    </label>
                    <!-- This element will display the recommended solution from the calculator. It will be shown
                         only when a recommendation is available. -->
                    <div id="cta-estimate-display" class="cta-estimate-display" hidden></div>
                    <button type="button" class="btn btn-accent" id="cta-next">Pokračovat</button>
                  </div>

                  <div class="cta-step cta-step--2" hidden>
                    <label>Jméno <input type="text" name="jmeno" required></label>
                    <label>E-mail <input type="email" name="email" autocomplete="email" required></label>
                    <label>Telefon <input type="tel" name="tel" autocomplete="tel" required></label>
                    <label class="consent">
                      <input type="checkbox" required>
                      Souhlasím se zpracováním údajů pro účely poptávky.
                    </label>
                    <button type="submit" class="btn btn-accent">Odeslat poptávku</button>
                    <button type="button" class="btn btn-secondary" id="cta-prev">Zpět</button>
                  </div>
                  <!-- Hidden field capturing the estimator recommendation -->
                  <input type="hidden" name="navrh" id="cta-estimate">
                  <!-- Hidden field capturing detailed parameters from the estimator -->
                  <input type="hidden" name="parametry" id="cta-details">
                  <input type="text" name="company" class="hp" tabindex="-1" autocomplete="off" aria-hidden="true">
                </form>
              </div>
        </div>
    </section>
  </main>

  
  <a href="#cta" id="sticky-cta" class="btn btn-accent" data-magnetic aria-label="Přejít na poptávkový formulář">Poptat službu</a>

  <!-- Team Member Modal -->
  <div id="team-modal-overlay">
      <div id="team-modal-content" role="document" aria-labelledby="modal-name" aria-describedby="modal-bio">
          <button id="team-modal-close" aria-label="Zavřít detail">&times;</button>
          <div class="modal-grid">
              <img id="modal-img" src="" alt="Portrét člena týmu">
              <div>
                  <h3 id="modal-name"></h3>
                  <p id="modal-role"></p>
                  <p id="modal-bio"></p>
                  <p id="modal-motto"></p>
              </div>
          </div>
      </div>
  </div>
  
  <!-- Lightbox Container -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true">
      <button class="lightbox-close" aria-label="Zavřít galerii">&times;</button>
      <img src="" alt="Zvětšený obrázek z galerie">
  </div>

  <!-- Form Success Modal -->
  <div id="form-success-overlay">
      <div id="form-success-content" role="alertdialog" aria-labelledby="form-success-title">
          <button id="form-success-close" aria-label="Zavřít zprávu">&times;</button>
          <div class="success-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
          </div>
          <h3 id="form-success-title">Děkujeme!</h3>
          <p>Vaše poptávka byla úspěšně odeslána. Ozveme se vám co nejdříve.</p>
      </div>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const preloader = document.getElementById('preloader');
      document.body.classList.remove('loading');
      preloader?.classList.add('hidden');
      // safety fallback (kdyby window.load neproběhl)
      setTimeout(() => preloader?.classList.add('hidden'), 1500);
    });

    window.addEventListener('load', () => {
      gsap.registerPlugin(ScrollTrigger, TextPlugin);
      
      const mainContent = document.querySelector('main');
      
      const tl = gsap.timeline({ defaults: { ease: "power2.out", duration: 1.2 } });
      tl.to(mainContent, { duration: 0.5, opacity: 1 })
        .from(".hero-content h1", { opacity: 0, y: 30 }, "-=0.3")
        .from(".hero-subheading", { opacity: 0, y: 20 }, "-=1")
        .from(".hero-claim", { opacity: 0, y: 20 }, "-=0.9")
        .from(".hero-trust", { opacity: 0, y: 20 }, "-=0.9")
        .from(".hero-quick-form", { opacity: 0, y: 20 }, "-=0.9")
        .from(".hero-contact-quick", { opacity: 0, y: 20 }, "-=0.8");

      if (typeof initAnimations === 'function') {
        initAnimations();
      }

      // --- Quick Quote Form ---
      const qt=document.getElementById('quick-toggle'), qf=document.getElementById('quick-form');
      if(qt && qf){ qt.addEventListener('click',()=>{ 
        const isOpen=qf.classList.toggle('collapsed');
        qt.setAttribute('aria-expanded', String(!isOpen));
      });}

      // --- Universal Collapsible ---
      document.querySelectorAll('.service-toggle, .faq-question').forEach(btn=>{
        const panel = document.getElementById(btn.getAttribute('aria-controls'));
        if (!panel) return;
        btn.addEventListener('click', ()=>{
          const open = btn.getAttribute('aria-expanded') === 'true';
          // Close all other FAQ items if it's an FAQ
          if (btn.classList.contains('faq-question') && !open) {
            document.querySelectorAll('.faq-question').forEach(b => {
                const p = document.getElementById(b.getAttribute('aria-controls'));
                b.setAttribute('aria-expanded', 'false');
                b.classList.remove('active');
                if (p) {
                  p.hidden = true;
                  p.classList.remove('is-open');
                }
            });
          }

          btn.setAttribute('aria-expanded', String(!open));
          btn.classList.toggle('active', !open);
          panel.hidden = open;
          panel.classList.toggle('is-open', !open);
        });
      });
      
      // --- Estimator (Aurora calculator) ---
      const estimatorForm = document.getElementById('estimator-form');
      const calculatorContainer = document.getElementById('calculator-container');
      if (estimatorForm && calculatorContainer) {
        const serviceNav = document.getElementById('service-nav');
        const serviceButtons = serviceNav ? Array.from(serviceNav.querySelectorAll('.service-nav-item')) : [];
        const btnCalculate = document.getElementById('btn-calculate');
        const steps = estimatorForm.querySelectorAll('.calculator-step');
        const fieldsContainer = document.getElementById('form-fields-container');
        const summaryPanel = document.getElementById('summary-panel');
        const resultContainer = document.getElementById('result-container');
        const serviceTypeSelect = document.getElementById('service-type-select');
        const step2Title = document.getElementById('step2-title');
        const nf = new Intl.NumberFormat('cs-CZ');
        const ctaEstimateField = document.getElementById('cta-estimate');
        const ctaDetailsField = document.getElementById('cta-details');
        const ctaDisplay = document.getElementById('cta-estimate-display');
        const ctaServiceSelect = document.getElementById('cta-service-select');

        let currentStep = 1;
        let lastEstimate = '';

        const serviceLabels = {
          object: 'Ostraha objektu',
          vip: 'Osobní ochrana',
          event: 'Event security',
          sport: 'Sportovní utkání',
          club: 'Ostraha nočních podniků'
        };

        const infoIcon = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.6" opacity="0.7"/><path d="M12 16V11" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="12" cy="7.5" r="1" fill="currentColor"/></svg>';

        const fieldTemplates = {
          object: `
            <div class="form-group" style="animation-delay:0.1s;">
              <div class="field-header">
                <span class="field-label">Typ objektu</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak vybrat typ objektu">${infoIcon}</button>
              </div>
              <select name="object_type" required>
                <option value="office">Kanceláře</option>
                <option value="warehouse">Sklad</option>
                <option value="construction">Stavba</option>
                <option value="mall">Obchodní centrum</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Tip:</strong> Vyberte kategorii, která vystihuje hlavní provoz objektu. Pomůže to nastavit správný poměr stálé a mobilní ostrahy.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group slider-group" style="animation-delay:0.2s;">
              <div class="field-header">
                <span class="field-label">Rozloha (m²)</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak počítat rozlohu">${infoIcon}</button>
                  <input type="number" name="area" min="50" max="50000" value="1000" required>
                </div>
              </div>
              <input type="range" data-sync="area" min="50" max="50000" value="1000" step="50">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Jak na to:</strong> Započítejte všechny střežené plochy včetně skladů, parkovišť a dočasných objektů na stavbě.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group slider-group" style="animation-delay:0.3s;">
              <div class="field-header">
                <span class="field-label">Počet vstupů</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak počítat vstupy">${infoIcon}</button>
                  <input type="number" name="entrances_object" min="1" max="50" value="1" required>
                </div>
              </div>
              <input type="range" data-sync="entrances_object" min="1" max="50" value="1">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Počítejte:</strong> Každé místo, kterým prochází zaměstnanci, návštěvy nebo logistika a vyžaduje dohled (turnikety, rampy, vjezdy).</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.4s;">
              <div class="field-header">
                <span class="field-label">Provoz</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Co znamená režim provozu">${infoIcon}</button>
              </div>
              <select name="operation_time" required>
                <option value="day">Denní</option>
                <option value="247">24/7</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Vysvětlení:</strong> Denní provoz předpokládá hlídání pouze v aktivních hodinách. Volba 24/7 navyšuje směny tak, aby byl objekt pokryt i v noci.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group toggle-field" style="animation-delay:0.5s;">
              <div class="field-header">
                <span class="field-label">Kamerový systém</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak pracujeme s CCTV">${infoIcon}</button>
                  <input type="checkbox" name="cctv">
                </div>
              </div>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Proč se ptáme:</strong> Funkční a monitorovaný CCTV umožňuje část práce delegovat na operátory, proto může výsledný počet fyzické ostrahy mírně klesnout.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
          `,
          vip: `
            <div class="form-group slider-group" style="animation-delay:0.1s;">
              <div class="field-header">
                <span class="field-label">Počet chráněných osob</span>
                <div class="field-tools">
                  <input type="number" name="vip_count" min="1" max="20" value="1" required>
                </div>
              </div>
              <input type="range" data-sync="vip_count" min="1" max="20" value="1">
            </div>
            <div class="form-group" style="animation-delay:0.2s;">
              <div class="field-header">
                <span class="field-label">Rizikovost</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak posoudit rizikovost">${infoIcon}</button>
              </div>
              <select name="risk_vip" required>
                <option value="1">Nízká</option>
                <option value="1.5">Střední</option>
                <option value="2">Vysoká</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Jak vybírat:</strong> Střední riziko znamená veřejně známou osobu nebo napjaté obchodní vztahy. Vysoké riziko zahrnuje hrozby či mediálně sledované případy.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.3s;">
              <div class="field-header">
                <span class="field-label">Pohyb</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Co znamená režim pohybu">${infoIcon}</button>
              </div>
              <select name="movement" required>
                <option value="static">Pevná lokalita</option>
                <option value="travel">Cestování</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Poznámka:</strong> Cestování zahrnuje eskortu mezi místy, nástupy a ukončení akcí. Vyžaduje záložní tým i koordinaci s řidičem.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group toggle-field" style="animation-delay:0.4s;">
              <div class="field-header">
                <span class="field-label">Řidič-bodyguard</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Kdy přibrat řidiče-bodyguarda">${infoIcon}</button>
                  <input type="checkbox" name="driver">
                </div>
              </div>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Doporučení:</strong> Pokud klient často cestuje autem nebo potřebuje rychlou evakuaci, kombinace řidiče a ochranky šetří čas i koordinaci.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
          `,
          event: `
            <div class="form-group slider-group" style="animation-delay:0.1s;">
              <div class="field-header">
                <span class="field-label">Očekávaný počet návštěvníků</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak odhadnout návštěvníky">${infoIcon}</button>
                  <input type="number" name="attendees_event" min="10" max="100000" value="500" required>
                </div>
              </div>
              <input type="range" data-sync="attendees_event" min="10" max="100000" value="500" step="10">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Rada:</strong> Zahrňte i staff a dodavatele. Kapacita prostoru bývá klíčová pro stanovení minimálních limitů pořadatelské služby.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group slider-group" style="animation-delay:0.2s;">
              <div class="field-header">
                <span class="field-label">Trvání akce (hodiny)</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak počítat délku akce">${infoIcon}</button>
                  <input type="number" name="duration_event" min="1" max="72" value="8" required>
                </div>
              </div>
              <input type="range" data-sync="duration_event" min="1" max="72" value="8">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Včetně:</strong> nastavení, samotného programu i odchodu návštěvníků. Nad 12 hodin se počítá druhá směna.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.3s;">
              <div class="field-header">
                <span class="field-label">Rizikovost</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Co ovlivňuje rizikovost akce">${infoIcon}</button>
              </div>
              <select name="risk_event" required>
                <option value="1">Nízká</option>
                <option value="1.3">Střední</option>
                <option value="1.6">Vysoká</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Příklady:</strong> Střední riziko jsou veřejné akce s alkoholem či VIP hosty. Vysoké riziko počítejte u festivalů, demonstrací nebo akcí s bezpečnostní historií.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.4s;">
              <div class="field-header">
                <span class="field-label">Prostředí</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak volit prostředí">${infoIcon}</button>
              </div>
              <select name="venue_type" required>
                <option value="indoor">Vnitřní</option>
                <option value="outdoor">Venkovní</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Rozdíl:</strong> Venkovní akce vyžadují více personálu na perimetr, vstupy a koordinaci pohybu davu.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group toggle-field" style="animation-delay:0.5s;">
              <div class="field-header">
                <span class="field-label">Podává se alkohol</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak alkohol ovlivňuje ostrahu">${infoIcon}</button>
                  <input type="checkbox" name="alcohol">
                </div>
              </div>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Bezpečnost:</strong> Konzumace alkoholu zvyšuje potřebu dohledu na vstupu i ve vnitřních zónách. Zahrnujeme také kontrolu ID a řešení incidentů.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
          `,
          sport: `
            <div class="form-group slider-group" style="animation-delay:0.1s;">
              <div class="field-header">
                <span class="field-label">Očekávaný počet diváků</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak odhadnout diváky">${infoIcon}</button>
                  <input type="number" name="attendees_sport" min="10" max="80000" value="500" required>
                </div>
              </div>
              <input type="range" data-sync="attendees_sport" min="10" max="80000" value="500" step="10">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Nezapomeňte:</strong> Uveďte i očekávané fanoušky hostů a VIP sekce. Ovlivňuje to počet pořadatelů na sektory.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group slider-group" style="animation-delay:0.2s;">
              <div class="field-header">
                <span class="field-label">Trvání akce (hodiny)</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak dlouho trvá utkání">${infoIcon}</button>
                  <input type="number" name="duration_sport" min="1" max="12" value="4" required>
                </div>
              </div>
              <input type="range" data-sync="duration_sport" min="1" max="12" value="4">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Poznámka:</strong> Zahrňte i předzápasový a pozápasový servis. Nad 12 hodin automaticky vytváří druhou směnu.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.3s;">
              <div class="field-header">
                <span class="field-label">Rizikovost</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak stanovit riziko utkání">${infoIcon}</button>
              </div>
              <select name="risk_sport" required>
                <option value="1">Běžné</option>
                <option value="1.5">Derby</option>
                <option value="2">Vysoké riziko</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Derby:</strong> Tradiční rivalita či riziko potyček. Vysoké riziko zahrnuje mezinárodní zápasy nebo disciplinární opatření z minulosti.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group toggle-field" style="animation-delay:0.4s;">
              <div class="field-header">
                <span class="field-label">Oddělený sektor hostů</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Co znamená oddělený sektor">${infoIcon}</button>
                  <input type="checkbox" name="guest_sector">
                </div>
              </div>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Organizace:</strong> Oddělené sektory vyžadují samostatné vstupy, doprovod a koordinaci při přesunech fanoušků.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
          `,
          club: `
            <div class="form-group slider-group" style="animation-delay:0.1s;">
              <div class="field-header">
                <span class="field-label">Kapacita podniku</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak určit kapacitu">${infoIcon}</button>
                  <input type="number" name="club_capacity" min="20" max="2000" value="150" required>
                </div>
              </div>
              <input type="range" data-sync="club_capacity" min="20" max="2000" value="150" step="10">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Kapacita:</strong> Vyjděte z maximálního počtu hostů dle kolaudačního rozhodnutí včetně personálu.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group slider-group" style="animation-delay:0.2s;">
              <div class="field-header">
                <span class="field-label">Počet vstupů</span>
                <div class="field-tools">
                  <button type="button" class="info-chip" aria-expanded="false" aria-label="Vstupy a kontroly">${infoIcon}</button>
                  <input type="number" name="entrances_club" min="1" max="10" value="1" required>
                </div>
              </div>
              <input type="range" data-sync="entrances_club" min="1" max="10" value="1">
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Co zahrnout:</strong> Hlavní vstup, boční vchody i VIP zóny. Každý vstup vyžaduje minimálně dva pracovníky.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
            <div class="form-group" style="animation-delay:0.3s;">
              <div class="field-header">
                <span class="field-label">Rizikovost lokality</span>
                <button type="button" class="info-chip" aria-expanded="false" aria-label="Jak posoudit lokalitu">${infoIcon}</button>
              </div>
              <select name="risk_club" required>
                <option value="1">Nízká</option>
                <option value="1.3">Střední</option>
                <option value="1.6">Vysoká</option>
              </select>
              <div class="info-popover" hidden role="tooltip">
                <p><strong>Kritéria:</strong> Historie incidentů, okolní podniky a noční provoz v lokalitě. Vyšší riziko zvyšuje doporučený počet pracovníků.</p>
                <button type="button" class="close-popover" aria-label="Zavřít">Rozumím</button>
              </div>
            </div>
          `
        };

        function renderDefaultSummary() {
          if (!summaryPanel) return;
          summaryPanel.innerHTML = `
            <h4>Souhrn</h4>
            <p>Vyberte službu a doplňte parametry. Jakmile budete formulář upravovat, zobrazí se zde orientační přehled.</p>
            <ul>
              <li><span class="summary-label">Služba</span><span class="summary-value">—</span></li>
              <li><span class="summary-label">Parametry</span><span class="summary-value">—</span></li>
            </ul>
          `;
        }

        function goToStep(step) {
          currentStep = step;
          steps.forEach(stepEl => {
            const matches = Number(stepEl.dataset.step) === currentStep;
            stepEl.classList.toggle('active', matches);
          });
          if (btnCalculate) {
            btnCalculate.style.display = currentStep === 2 ? 'inline-flex' : 'none';
          }
        }

        function getSelectText(name) {
          const el = fieldsContainer ? fieldsContainer.querySelector(`[name="${name}"]`) : null;
          if (el && el instanceof HTMLSelectElement && el.selectedIndex >= 0) {
            return el.options[el.selectedIndex].textContent.trim();
          }
          return '—';
        }

        function buildSummary(service, fd) {
          const items = [];
          switch (service) {
            case 'object': {
              const area = Number(fd.get('area') || 0);
              const entrances = Number(fd.get('entrances_object') || 0);
              items.push({ label: 'Typ objektu', value: getSelectText('object_type') });
              items.push({ label: 'Rozloha', value: area ? `${nf.format(area)} m²` : '—' });
              items.push({ label: 'Vstupy', value: entrances ? nf.format(entrances) : '—' });
              const operation = fd.get('operation_time') === '247' ? '24/7' : 'Denní';
              items.push({ label: 'Provoz', value: operation });
              items.push({ label: 'Kamerový systém', value: fd.has('cctv') ? 'Ano' : 'Ne' });
              break;
            }
            case 'vip': {
              const count = Number(fd.get('vip_count') || 0);
              const risk = fd.get('risk_vip');
              const riskText = risk === '2' ? 'Vysoká' : risk === '1.5' ? 'Střední' : 'Nízká';
              items.push({ label: 'Počet osob', value: count ? nf.format(count) : '—' });
              items.push({ label: 'Rizikovost', value: riskText });
              items.push({ label: 'Pohyb', value: fd.get('movement') === 'travel' ? 'Cestování' : 'Pevná lokalita' });
              items.push({ label: 'Řidič-bodyguard', value: fd.has('driver') ? 'Ano' : 'Ne' });
              break;
            }
            case 'event': {
              const attendees = Number(fd.get('attendees_event') || 0);
              const duration = Number(fd.get('duration_event') || 0);
              const risk = fd.get('risk_event');
              const riskText = risk === '1.6' ? 'Vysoká' : risk === '1.3' ? 'Střední' : 'Nízká';
              items.push({ label: 'Návštěvníci', value: attendees ? nf.format(attendees) : '—' });
              items.push({ label: 'Délka', value: duration ? `${nf.format(duration)} h` : '—' });
              items.push({ label: 'Prostředí', value: fd.get('venue_type') === 'outdoor' ? 'Venkovní' : 'Vnitřní' });
              items.push({ label: 'Riziko', value: riskText });
              items.push({ label: 'Alkohol', value: fd.has('alcohol') ? 'Ano' : 'Ne' });
              break;
            }
            case 'sport': {
              const spectators = Number(fd.get('attendees_sport') || 0);
              const duration = Number(fd.get('duration_sport') || 0);
              const risk = fd.get('risk_sport');
              const riskText = risk === '2' ? 'Vysoké' : risk === '1.5' ? 'Derby' : 'Běžné';
              items.push({ label: 'Diváci', value: spectators ? nf.format(spectators) : '—' });
              items.push({ label: 'Délka', value: duration ? `${nf.format(duration)} h` : '—' });
              items.push({ label: 'Riziko', value: riskText });
              items.push({ label: 'Oddělený sektor hostů', value: fd.has('guest_sector') ? 'Ano' : 'Ne' });
              break;
            }
            case 'club': {
              const capacity = Number(fd.get('club_capacity') || 0);
              const entrances = Number(fd.get('entrances_club') || 0);
              const risk = fd.get('risk_club');
              const riskText = risk === '1.6' ? 'Vysoká' : risk === '1.3' ? 'Střední' : 'Nízká';
              items.push({ label: 'Kapacita', value: capacity ? nf.format(capacity) : '—' });
              items.push({ label: 'Vstupy', value: entrances ? nf.format(entrances) : '—' });
              items.push({ label: 'Riziko lokality', value: riskText });
              break;
            }
          }
          const detail = items.map(item => `${item.label}: ${item.value}`).join(', ');
          return { items, detail };
        }

        function updateSummary() {
          if (!summaryPanel) return;
          const service = serviceTypeSelect.value;
          if (!service || !fieldsContainer.children.length) {
            renderDefaultSummary();
            return;
          }
          const fd = new FormData(estimatorForm);
          const { items } = buildSummary(service, fd);
          const list = items.map(item => `<li><span class="summary-label">${item.label}</span><span class="summary-value">${item.value}</span></li>`).join('');
          const serviceName = serviceLabels[service] || 'Služba';
          summaryPanel.innerHTML = `<h4>Souhrn</h4><p>Aktualizováno pro <strong>${serviceName}</strong>.</p><ul>${list}</ul>`;
        }

        function validateField(field) {
          if (!field) return;
          if (field.checkValidity()) {
            field.classList.remove('invalid');
          } else {
            field.classList.add('invalid');
          }
        }

        function validateCurrentStep() {
          if (currentStep !== 2) return true;
          const required = fieldsContainer.querySelectorAll('[required]');
          const isValid = Array.from(required).every(field => field.checkValidity());
          if (btnCalculate) {
            btnCalculate.disabled = !isValid;
          }
          return isValid;
        }

        function attachFieldListeners() {
          const inputs = fieldsContainer.querySelectorAll('input, select');
          inputs.forEach(el => {
            el.addEventListener('input', () => {
              if (el.type === 'range') {
                const numberInput = fieldsContainer.querySelector(`input[name="${el.dataset.sync}"]`);
                if (numberInput) {
                  numberInput.value = el.value;
                  validateField(numberInput);
                }
              } else if (el.type === 'number') {
                const rangeInput = fieldsContainer.querySelector(`input[data-sync="${el.name}"]`);
                if (rangeInput) {
                  rangeInput.value = el.value || rangeInput.value;
                }
              }
              validateField(el);
              validateCurrentStep();
              updateSummary();
            });
            el.addEventListener('change', () => {
              validateField(el);
              validateCurrentStep();
              updateSummary();
            });
          });
          validateCurrentStep();
          updateSummary();
        }

        function updateCTAEstimateDisplay() {
          if (!lastEstimate) return;
          if (ctaEstimateField) {
            ctaEstimateField.value = lastEstimate;
          }
          if (ctaDetailsField) {
            const parts = lastEstimate.split(' – ');
            ctaDetailsField.value = parts.slice(1).join(' – ');
          }
          if (ctaDisplay) {
            ctaDisplay.textContent = lastEstimate;
            ctaDisplay.hidden = false;
          }
          const selectedService = serviceTypeSelect.value;
          if (ctaServiceSelect && serviceLabels[selectedService]) {
            ctaServiceSelect.value = serviceLabels[selectedService];
          }
        }

        function calculateEstimate() {
          if (!validateCurrentStep()) return;
          window.closeCalculatorPopovers?.();
          const fd = new FormData(estimatorForm);
          const service = serviceTypeSelect.value;
          let estimate = 'Nespecifikováno';
          let summaryItems = [];
          let detail = '';

          try {
            switch (service) {
              case 'object': {
                const area = Number(fd.get('area') || 0);
                const entrances = Number(fd.get('entrances_object') || 1);
                const operation = fd.get('operation_time');
                let base = (area / 2000) + entrances;
                if (fd.has('cctv')) base *= 0.8;
                base = Math.max(1, Math.ceil(base));
                estimate = operation === '247'
                  ? `${base * 2}–${base * 3} pracovníci ve směnách`
                  : `${base}–${base + 1} pracovníci na směnu`;
                break;
              }
              case 'vip': {
                const count = Number(fd.get('vip_count') || 1);
                const risk = Number(fd.get('risk_vip') || 1);
                let base = Math.ceil(count * risk);
                if (fd.get('movement') === 'travel') base += 1;
                if (fd.has('driver')) base += 1;
                estimate = base === 1 ? '1 bodyguard' : `${base}–${base + 1} bodyguardi`;
                break;
              }
              case 'event': {
                const attendees = Number(fd.get('attendees_event') || 0);
                const risk = Number(fd.get('risk_event') || 1);
                const duration = Number(fd.get('duration_event') || 8);
                let ratio;
                if (attendees <= 1000) ratio = 100;
                else if (attendees <= 10000) ratio = 150;
                else ratio = 250;
                let base = attendees / (ratio / risk);
                if (fd.has('alcohol')) base *= 1.25;
                if (fd.get('venue_type') === 'outdoor') base *= 1.2;
                const guards = Math.max(1, Math.ceil(base));
                const supervisors = Math.max(1, Math.ceil(guards / 10));
                const shifts = Math.max(1, Math.ceil(duration / 12));
                const totalPerShift = guards + supervisors;
                const shiftLabel = shifts === 1 ? '1 směna' : `${shifts} směny`;
                estimate = `${totalPerShift} osob na směnu (${shiftLabel})`;
                break;
              }
              case 'sport': {
                const spectators = Number(fd.get('attendees_sport') || 0);
                const risk = Number(fd.get('risk_sport') || 1);
                const duration = Number(fd.get('duration_sport') || 4);
                let ratio;
                if (spectators <= 5000) ratio = 100;
                else if (spectators <= 20000) ratio = 180;
                else ratio = 250;
                let base = spectators / (ratio / risk);
                if (fd.has('guest_sector')) base += Math.ceil(base * 0.15) + 5;
                const guards = Math.max(1, Math.ceil(base));
                const supervisors = Math.max(1, Math.ceil(guards / 12));
                const shifts = Math.max(1, Math.ceil(duration / 12));
                const shiftLabel = shifts === 1 ? '1 směna' : `${shifts} směny`;
                estimate = `${guards + supervisors} pořadatelů (${shiftLabel})`;
                break;
              }
              case 'club': {
                const capacity = Number(fd.get('club_capacity') || 0);
                const entrances = Number(fd.get('entrances_club') || 1);
                const risk = Number(fd.get('risk_club') || 1);
                const ratio = 75 / risk;
                let base = capacity / ratio + entrances;
                const guards = Math.max(1, Math.ceil(base));
                estimate = `${guards}–${guards + 1} pracovníci`;
                break;
              }
            }
            const summaryData = buildSummary(service, fd);
            summaryItems = summaryData.items;
            detail = summaryData.detail;
          } catch (error) {
            console.error('Chyba výpočtu:', error);
            estimate = 'Chyba';
            detail = 'Při výpočtu nastala chyba.';
          }

          const summaryList = summaryItems.length
            ? summaryItems.map(item => `<li><span>${item.label}</span><span>${item.value}</span></li>`).join('')
            : '<li><span>Parametry</span><span>—</span></li>';

          resultContainer.innerHTML = `
            <div class="result-title">Doporučený počet</div>
            <div class="result-estimate">${estimate}</div>
            <ul class="result-summary">${summaryList}</ul>
            <div class="result-actions">
              <a href="#cta" class="calc-btn calc-btn-primary" id="estimator-cta">Poptat službu</a>
              <button type="button" class="calc-btn calc-btn-secondary" id="estimator-reset">Zpět na výběr služeb</button>
            </div>
            <p class="result-note">Toto je pouze orientační odhad. Pro přesnou nabídku nás prosím kontaktujte.</p>
          `;

          lastEstimate = detail ? `${estimate} – ${detail}` : estimate;
          updateCTAEstimateDisplay();
          goToStep(3);

          const ctaBtn = resultContainer.querySelector('#estimator-cta');
          if (ctaBtn) {
            ctaBtn.addEventListener('click', updateCTAEstimateDisplay);
          }
          const resetBtn = resultContainer.querySelector('#estimator-reset');
          if (resetBtn) {
            resetBtn.addEventListener('click', () => {
              window.closeCalculatorPopovers?.();
              estimatorForm.reset();
              fieldsContainer.innerHTML = '';
              serviceButtons.forEach(btn => btn.classList.remove('active'));
              serviceTypeSelect.value = '';
              calculatorContainer.classList.remove('has-bg');
              calculatorContainer.style.removeProperty('--context-bg');
              renderDefaultSummary();
              if (btnCalculate) {
                btnCalculate.style.display = 'none';
                btnCalculate.disabled = true;
              }
              if (ctaDisplay) {
                ctaDisplay.hidden = true;
              }
              lastEstimate = '';
              goToStep(1);
            });
          }
        }

        function setService(service, button) {
          if (!fieldsContainer) return;
          window.closeCalculatorPopovers?.();
          estimatorForm.reset();
          fieldsContainer.innerHTML = fieldTemplates[service] || '';
          serviceTypeSelect.value = service;
          step2Title.textContent = serviceLabels[service] || 'Specifikace služby';
          if (button && button.dataset.bg) {
            calculatorContainer.style.setProperty('--context-bg', `url(${button.dataset.bg})`);
            calculatorContainer.classList.add('has-bg');
          } else {
            calculatorContainer.style.removeProperty('--context-bg');
            calculatorContainer.classList.remove('has-bg');
          }
          attachFieldListeners();
          goToStep(2);
          lastEstimate = '';
          if (ctaDisplay) {
            ctaDisplay.hidden = true;
          }
          if (ctaEstimateField) {
            ctaEstimateField.value = '';
          }
          if (ctaDetailsField) {
            ctaDetailsField.value = '';
          }
        }

        serviceButtons.forEach(button => {
          button.addEventListener('click', () => {
            serviceButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            setService(button.dataset.service, button);
          });
        });

        if (btnCalculate) {
          btnCalculate.addEventListener('click', calculateEstimate);
        }

        renderDefaultSummary();
      }

// --- AJAX Form Submission ---
      const allForms = document.querySelectorAll('form[action*="formspree.io"]');
      const successOverlay = document.getElementById('form-success-overlay');
      const closeSuccessOverlayBtn = document.getElementById('form-success-close');

      async function handleFormSubmit(event) {
          event.preventDefault();
          const form = event.target;
          const data = new FormData(form);
          const submitButton = form.querySelector('button[type="submit"]');
          const originalButtonText = submitButton.textContent;

          submitButton.textContent = 'Odesílám...';
          submitButton.disabled = true;

          try {
              const response = await fetch(form.action, {
                  method: form.method,
                  body: data,
                  headers: { 'Accept': 'application/json' }
              });

              if (response.ok) {
                  form.reset();
                  if (form.id === 'quick-form') {
                      document.getElementById('quick-form').classList.add('collapsed');
                      document.getElementById('quick-toggle').setAttribute('aria-expanded', 'false');
                  }
                  if (form.id === 'cta-form') {
                      document.querySelector('.cta-step--1').hidden = false;
                      document.querySelector('.cta-step--2').hidden = true;
                  }
                  successOverlay.classList.add('visible');
                  submitButton.textContent = originalButtonText;
                  submitButton.disabled = false;
              } else {
                  const responseData = await response.json();
                  console.error('Form submission error:', responseData);
                  submitButton.textContent = 'Chyba, zkuste znovu';
                  setTimeout(() => {
                      submitButton.textContent = originalButtonText;
                      submitButton.disabled = false;
                  }, 3000);
              }
          } catch (error) {
              console.error('Network or other error:', error);
              submitButton.textContent = 'Chyba sítě';
              setTimeout(() => {
                  submitButton.textContent = originalButtonText;
                  submitButton.disabled = false;
              }, 3000);
          }
      }

      allForms.forEach(form => {
          form.addEventListener('submit', handleFormSubmit);
      });

      function closeSuccessOverlay() {
          successOverlay.classList.remove('visible');
      }

      closeSuccessOverlayBtn.addEventListener('click', closeSuccessOverlay);
      successOverlay.addEventListener('click', (e) => {
          if (e.target === successOverlay) {
              closeSuccessOverlay();
          }
      });
      document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && successOverlay.classList.contains('visible')) {
              closeSuccessOverlay();
          }
      });


      // --- CTA 2-step form ---
      const next=document.getElementById('cta-next'), prev=document.getElementById('cta-prev');if(next && prev){
        const s1=document.querySelector('.cta-step--1'), s2=document.querySelector('.cta-step--2');
        next.addEventListener('click',()=>{ s1.hidden=true; s2.hidden=false; });
        prev.addEventListener('click',()=>{ s2.hidden=true; s1.hidden=false; });
      }

      // --- Team Modal Logic ---
      const teamData = {
        '1': { name: 'Tomáš Hozák', role: 'Jednatel & Majitel', img: 'https://bravion.cz/wp-content/uploads/2025/08/d9fd1e7a-056d-493d-bea8-af7a2165f87a-e1758974869670.jpg', bio: 'Bravion vznikl, protože v bezpečnosti rozhodují detaily a odpovědnost. Chtěli jsme službu, která plánuje, vede a vyhodnocuje bez mezer – a klient přesně ví, kdo ručí za výsledek.', motto: '“Bezpečnost není produkt, je to proces. A my ho dotahujeme k dokonalosti.”' },
        '2': { name: 'David Hudák', role: 'Provozní Supervizor', img: 'https://scontent.fprg4-1.fna.fbcdn.net/v/t1.6435-9/33806402_1642514525786041_309828400883695616_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=833d8c&_nc_ohc=9_EABP33xyMQ7kNvwGI49gk&_nc_oc=Adk81HCh0zp9qMJsIfb69kd6Ed3koBWvNngWhug9gUl6PC09BIs-HM2Nk9Q1tjK1SC0&_nc_zt=23&_nc_ht=scontent.fprg4-1.fna&_nc_gid=Eo3UpTv6jOEPWLlPbEzAVA&oh=00_AfbfhzTT0KKddfKVSJvkDcUh_j6XO7KrvX2DHjG5wlK29w&oe=68FF43C1', bio: 'David je profesionální zápasník, který se naučil zvládat tlak i v těch nejnáročnějších situacích. Díky tomu je přirozeně trénovaný k deeskalaci konfliktů a dokáže udržet klid tam, kde by ostatní ztráceli nervy.', motto: '“Síla není v konfliktu, ale v jeho předcházení.”' },
        '3': { name: 'Kristýna Voksová', role: 'HR Asistentka', img: 'https://scontent.fprg4-1.fna.fbcdn.net/v/t1.6435-9/118765242_4567164523324066_4486028877719179790_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=3STTIpbQrMoQ7kNvwGmK9nV&_nc_oc=AdkUySqzVJFBzKtsCLhiIVoWFPgKRyQsIYwMCB8dCSiPz4uIiPGCa0LUFYD7dKdCFBY&_nc_zt=23&_nc_ht=scontent.fprg4-1.fna&_nc_gid=EZH7SqJhsuqIegooOSvHGg&oh=00_AfYRf-YyrbXvPHrJ4AUeDIevvXhabl-1dhXTFO2cnbpZtg&oe=68FF4F58', bio: 'Kristýna vybírá a drží kvalitu našeho týmu. Díky ní má Bravion jistotu, že každý člen je prověřený a spolehlivý.', motto: '“Nejsilnějším článkem bezpečnosti je kvalitní a spokojený člověk.”' }
      };

      const modalOverlay = document.getElementById('team-modal-overlay');
      const modalCloseBtn = document.getElementById('team-modal-close');
      const modal = { img: document.getElementById('modal-img'), name: document.getElementById('modal-name'), role: document.getElementById('modal-role'), bio: document.getElementById('modal-bio'), motto: document.getElementById('modal-motto') };

      document.querySelectorAll('.team-member').forEach(member => {
          const openModal = () => {
              const data = teamData[member.dataset.memberId];
              modal.img.src = data.img;
              // Use a generic alt text to protect privacy of team members
              modal.img.alt = 'Portrét člena týmu';
              modal.name.textContent = data.name;
              modal.role.textContent = data.role;
              modal.bio.textContent = data.bio;
              modal.motto.textContent = data.motto;
              document.body.classList.add('modal-open');
              modalOverlay.classList.add('visible');
          };
          member.addEventListener('click', openModal);
          member.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(); } });
      });

      const closeModal = () => {
          document.body.classList.remove('modal-open');
          modalOverlay.classList.remove('visible');
      };
      modalCloseBtn.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });
      
      const focusSelectors='button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])';
      modalOverlay.addEventListener('keydown',e=>{ if(e.key==='Escape') closeModal(); });
      
      const trapFocus=()=>{
        const focusables=modalOverlay.querySelectorAll(focusSelectors);
        const first=focusables[0], last=focusables[focusables.length-1];
        modalOverlay.addEventListener('keydown',e=>{
          if(e.key!=='Tab') return;
          if(e.shiftKey && document.activeElement===first){e.preventDefault();last.focus();}
          else if(!e.shiftKey && document.activeElement===last){e.preventDefault();first.focus();}
        });
      };
      modalOverlay.addEventListener('transitionend',()=>{ if(modalOverlay.classList.contains('visible')){ trapFocus(); modalCloseBtn.focus(); }});

      // --- Lightbox Logic ---
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = lightbox.querySelector('img');
      document.querySelectorAll('.gallery-item').forEach(item => {
          item.addEventListener('click', () => {
              lightboxImg.src = item.querySelector('img').src;
              lightbox.classList.add('visible');
          });
      });

      const closeLightbox = () => lightbox.classList.remove('visible');
      lightbox.addEventListener('click', (e) => { if (e.target === lightbox || e.target.matches('.lightbox-close')) closeLightbox(); });
      document.addEventListener('keydown', (e) => { 
        if (e.key === 'Escape' && lightbox.classList.contains('visible')) closeLightbox();
      });


      function initAnimations() {
        // Respect user preference for reduced motion. If the user has requested reduced motion,
        // skip running heavy animations entirely. This helps users who experience discomfort
        // with excessive animations and aligns with accessibility best practices.
        try {
          if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            return;
          }
        } catch (e) {
          // If matchMedia is not supported, continue with animations.
        }
        
        ScrollTrigger.create({
            trigger: '#hero', start: 'bottom center',
            onEnter: () => document.getElementById('sticky-cta').classList.add('visible'),
            onLeaveBack: () => document.getElementById('sticky-cta').classList.remove('visible')
        });

        gsap.to("#scroll-progress", { scaleX: 1, ease: "none", scrollTrigger: { scrub: 0.3 } });

        const aura = document.getElementById('cursor-aura');
        window.addEventListener('mousemove', e => gsap.to(aura, { x: e.clientX, y: e.clientY, duration: 0.5, ease: 'power2.out' }));

        gsap.utils.toArray('[data-magnetic]').forEach(el => {
            const xTo = gsap.quickTo(el, "x", { duration: 1, ease: "elastic.out(1, 0.3)" });
            const yTo = gsap.quickTo(el, "y", { duration: 1, ease: "elastic.out(1, 0.3)" });
            el.addEventListener("mousemove", e => {
                const { clientX, clientY } = e, { height, width, left, top } = el.getBoundingClientRect();
                xTo((clientX - (left + width / 2)) * 0.3);
                yTo((clientY - (top + height / 2)) * 0.3);
            });
            el.addEventListener("mouseleave", () => { xTo(0); yTo(0); });
        });
        
        const statsBg = document.querySelector('.stats-bg-animated');
        let particles = '';
        for(let i=0; i<30; i++) particles += `<circle cx="${Math.random()*100}%" cy="${Math.random()*100}%" r="${Math.random()*1.5+0.5}" fill="var(--brand-accent)" opacity="0.3" />`;
        statsBg.innerHTML = particles;
        gsap.utils.toArray('.stats-bg-animated circle').forEach(c => gsap.to(c, { y:gsap.utils.random(-20,20), x:gsap.utils.random(-20,20), duration:gsap.utils.random(3,6), ease:'sine.inOut', repeat:-1, yoyo:true, }));

        const path = document.getElementById('process-line-path');
        if (path) {
          const len = path.getTotalLength();
          path.style.strokeDasharray = `${len}`;
          path.style.strokeDashoffset = `${len}`;
          ScrollTrigger.create({
            trigger: "#process", start: "top 200%", end: "bottom top", scrub: 1,
            onUpdate: self => path.style.strokeDashoffset = `${(1 - self.progress) * len}`
          });
        }
        
        gsap.to('.about-image', { yPercent: -10, ease: 'none', scrollTrigger: { trigger: '.about-grid', start: 'top bottom', end: 'bottom top', scrub: true } });
        
        gsap.to("#hero-bg-img", { scrollTrigger: { trigger: "#hero", start: "top top", end: "bottom top", scrub: true }, scale: 1.2 });
        
        document.querySelectorAll('[data-tilt]').forEach(el => {
          el.addEventListener('mousemove', (e) => {
            const { left, top, width, height } = el.getBoundingClientRect();
            gsap.to(el, { duration: 0.8, rotationY: ((e.clientX - left) / width - 0.5) * 15, rotationX: -((e.clientY - top) / height - 0.5) * 15, transformPerspective: 500, ease: "power2.out" });
          });
          el.addEventListener('mouseleave', () => gsap.to(el, { duration: 1.2, rotationY: 0, rotationX: 0, ease: "elastic.out(1, 0.3)" }));
        });
        
        gsap.utils.toArray('[data-animate-text]').forEach(el => {
            const split = new SplitType(el, { types: 'chars, words' });
            gsap.from(split.chars, { y: '100%', opacity: 0, duration: 0.6, ease: 'power2.out', stagger: 0.03, scrollTrigger: { trigger: el, start: 'top 200%', toggleActions: 'play none none none' } });
        });

        gsap.utils.toArray('.section-header p, .about-text p, .about-values, .cta-content p, .section-transition').forEach(el => {
          let props = el.classList.contains('section-transition') ? { y: -50, duration: 1.5 } : { y: 50, duration: 1.2 };
          gsap.from(el, { scrollTrigger: { trigger: el, start: 'top 200%', toggleActions: 'play none none none' }, opacity: 0, ease: 'power3.out', ...props });
        });

        gsap.utils.toArray('.clients-grid > *, .services-grid > *, .process-steps > *, .team-grid > *, .stats-grid > *, .testimonials-grid > *, .gallery-grid > *').forEach((el, i, arr) => {
            gsap.from(el, {
                scrollTrigger: { trigger: el, start: 'top 200%', toggleActions: 'play none none none' },
                opacity: 0, y: 50, duration: 1, ease: 'power3.out', delay: (i % 4) * 0.1
            });
        });

        gsap.utils.toArray('.stat-number').forEach(el => {
          const target = parseInt(el.dataset.target, 10);
          ScrollTrigger.create({
            trigger: el, start: "top 90%", once: true,
            onEnter: () => gsap.to(el, { textContent: target, duration: 1.2, ease: "power1.inOut", snap: { textContent: 1 }})
          });
        });

        gsap.utils.toArray('.animated-icon').forEach(icon => gsap.fromTo(icon, { rotate: -5 }, { rotate: 5, duration: 2, ease: 'sine.inOut', repeat: -1, yoyo: true }));
      }
    });
  </script>
  <script>
    (function () {
      const scope = document.getElementById('calculator') || document;
      let openPopover = null;

      function findPopover(button) {
        if (!button) return null;
        const direct = button.querySelector('.info-popover, .info-small-popover, .info-icon-popover');
        if (direct) return direct;
        const controlsId = button.getAttribute('aria-controls');
        if (controlsId) {
          const controlled = document.getElementById(controlsId);
          if (controlled) return controlled;
        }
        const wrapper = button.closest('.form-group, .info-icon-wrapper, .info-chip-wrapper');
        if (wrapper) {
          const fallback = wrapper.querySelector('.info-popover, .info-small-popover, .info-icon-popover');
          if (fallback) return fallback;
        }
        return null;
      }

      function closeOpenPopover() {
        if (!openPopover) return;
        const { btn, pop } = openPopover;
        if (pop) {
          pop.classList.remove('visible', 'is-visible');
          pop.setAttribute('hidden', '');
        }
        if (btn) {
          btn.setAttribute('aria-expanded', 'false');
        }
        openPopover = null;
      }

      scope.addEventListener('click', event => {
        const btn = event.target.closest('.info-chip, .info-small-icon, .info-icon-wrapper');
        const clickedInsideOpen = openPopover && event.target.closest('.info-popover, .info-small-popover, .info-icon-popover');

        if (event.target.closest('.close-popover')) {
          event.preventDefault();
          closeOpenPopover();
          return;
        }

        if (!btn && !clickedInsideOpen) {
          closeOpenPopover();
          return;
        }

        if (btn) {
          event.preventDefault();
          const pop = findPopover(btn);
          if (!pop) return;
          const isOpen = pop.classList.contains('visible') || pop.classList.contains('is-visible');
          closeOpenPopover();
          if (!isOpen) {
            pop.classList.add('visible', 'is-visible');
            pop.removeAttribute('hidden');
            btn.setAttribute('aria-expanded', 'true');
            openPopover = { btn, pop };
          }
        }
      });

      document.addEventListener('keydown', event => {
        if (event.key === 'Escape') {
          closeOpenPopover();
        }
      });

      window.closeCalculatorPopovers = closeOpenPopover;
    })();
  </script>
</body>
</html>
